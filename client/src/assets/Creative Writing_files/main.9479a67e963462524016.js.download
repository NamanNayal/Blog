/*! For license information please see main.9479a67e963462524016.js.LICENSE.txt */
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c3fc5056-8998-4200-9862-958bd98cc8a4",e._sentryDebugIdIdentifier="sentry-dbid-c3fc5056-8998-4200-9862-958bd98cc8a4")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"8c7304b32cb950344d6857e5d3784edc9d19b4c8"},(self.webpackChunkunibuddy_assistant=self.webpackChunkunibuddy_assistant||[]).push([[8792],{9027:()=>{},27:(e,t,r)=>{"use strict";var n,o,i,a,l,c,u,s,f,h,d,m=r(6540),p=r(5338),y=r(5519),v=r(4724),g=r(4863),b=r(2968),w=r(5897),E=r(3900),S=r(8890),x=r(9227),O=r(2135),j=r(8049),k=r(7407);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var T={},_=function(e){return e.Dislike="DISLIKE",e.Like="LIKE",e}({}),N=function(e){return e.Ambassador="AMBASSADOR",e.Staff="STAFF",e}({}),D=function(e){return e.Assistant="ASSISTANT",e.Function="FUNCTION",e.System="SYSTEM",e.Tool="TOOL",e.User="USER",e}({}),M=(0,O.J1)(n||(n=P(["\n    fragment AssistantMessage on AssistantConversationMessage {\n  id\n  sender\n  message\n  createdAt\n  metadata {\n    ambassadorProfile {\n      id\n      firstName\n      bio\n      profileUrl\n      profilePhoto\n      accountRole\n      degreeName\n      countryName\n    }\n    staffProfile {\n      id\n      firstName\n      bio\n      profileUrl\n      profilePhoto\n      accountRole\n      role\n    }\n  }\n}\n    "]))),q=(0,O.J1)(o||(o=P(["\n    mutation createAssistantConversation($universityId: String!) {\n  createAssistantConversation(\n    createAssistantConversationInput: {universityId: $universityId}\n  ) {\n    id\n    token\n    messages {\n      sender\n      message\n    }\n  }\n}\n    "])));var z=(0,O.J1)(i||(i=P(["\n    mutation CreateAssistantMessageFeedback($messageId: String!, $type: AssistantMessageFeedbackType!, $freeText: String) {\n  createAssistantMessageFeedback(\n    assistantMessageFeedbackInput: {messageId: $messageId, type: $type, freeText: $freeText}\n  )\n}\n    "])));var R=(0,O.J1)(a||(a=P(["\n    query GetAssistantConversation($id: String!, $universityId: String!, $token: String) {\n  getAssistantConversation(\n    getAssistantConversationInput: {id: $id, universityId: $universityId, token: $token}\n  ) {\n    id\n    messages {\n      id\n      sender\n      message\n      createdAt\n      universityId\n      feedback {\n        type\n        freeText\n      }\n      metadata {\n        ambassadorProfile {\n          id\n          firstName\n          bio\n          profileUrl\n          profilePhoto\n          accountRole\n          degreeName\n          countryName\n        }\n        staffProfile {\n          id\n          firstName\n          department\n          bio\n          profileUrl\n          profilePhoto\n          accountRole\n          role\n        }\n      }\n    }\n    feedback {\n      rating\n    }\n    leadGenerated\n  }\n}\n    "])));var G=(0,O.J1)(l||(l=P(["\n    query GetRandomAmbassadors($universityId: String!, $count: Float!) {\n  getRandomAmbassadors(\n    getRandomAmbassadorsInput: {universityId: $universityId, count: $count}\n  ) {\n    firstName\n    profilePhoto\n  }\n}\n    "])));var F=(0,O.J1)(c||(c=P(["\n    query getUniversityById($universityId: String) {\n  university(id: $universityId) {\n    id\n    slug\n    name\n    widgetUrl\n  }\n}\n    "])));var U=(0,O.J1)(u||(u=P(["\n    query getUniversityBySlug($universitySlug: String) {\n  university(slug: $universitySlug) {\n    id\n    slug\n    name\n    widgetUrl\n  }\n}\n    "])));var B=(0,O.J1)(s||(s=P(["\n    mutation MarkAssistantConversationAsViewed($universityId: String!, $conversationId: String!, $token: String) {\n  markAssistantConversationAsViewed(\n    markAssistantConversationAsViewedInput: {universityId: $universityId, conversationId: $conversationId, token: $token}\n  ) {\n    id\n  }\n}\n    "])));var W=(0,O.J1)(f||(f=P(["\n    mutation SaveAssistantConversationEmailLead($conversationId: String!, $universityId: String!, $email: String!, $ubConsent: Boolean!, $token: String) {\n  saveAssistantConversationEmailLead(\n    saveAssistantConversationEmailLeadInput: {conversationId: $conversationId, universityId: $universityId, email: $email, ubConsent: $ubConsent, token: $token}\n  ) {\n    email\n  }\n}\n    "])));var $=(0,O.J1)(h||(h=P(["\n    mutation SaveAssistantConversationFeedback($conversationId: String!, $universityId: String!, $rating: Float!, $text: String, $token: String) {\n  saveAssistantConversationFeedback(\n    saveAssistantConversationFeedbackInput: {conversationId: $conversationId, universityId: $universityId, rating: $rating, text: $text, token: $token}\n  ) {\n    rating\n    text\n  }\n}\n    "])));var H=(0,O.J1)(d||(d=P(["\n    mutation SendAssistantMessage($conversationId: String!, $input: String!, $universityId: String!, $token: String) {\n  sendAssistantMessage(\n    sendAssistantMessageInput: {conversationId: $conversationId, input: $input, universityId: $universityId, token: $token}\n  ) {\n    id\n  }\n}\n    "])));var J=(0,m.createContext)({universityId:"",universityName:"",universitySlug:"",widgetUrl:void 0});function Y(){return(0,m.useContext)(J)}var V=function(){return m.createElement(y.Ss2,{h:"100vh",minH:"100vh"},m.createElement(y.Ss2,{justifyContent:"center",flex:1},m.createElement(y.DZT,{level:"2",size:"small",weight:"bold",align:"center",color:"red600"},"Error. Could not find university id or university slug.")))},Z=function(e){var t=e.universityId,r=e.universitySlug,n=e.skip,o=function(e){var t=C(C({},T),e);return k.IT(F,t)}({variables:{universityId:t},skip:n||!t}),i=o.data,a=o.loading,l=o.error,c=function(e){var t=C(C({},T),e);return k.IT(U,t)}({variables:{universitySlug:r},skip:n||!r||!!t}),u=c.data,s=c.loading,f=c.error,h=i,d=a,m=l;return t||(h=u,d=s,m=f),{data:h,loading:d,error:m}},K=function(e){var t=e.universityId,r=e.universitySlug,n=e.children,o=new URLSearchParams(window.location.search).get("render"),i=Z({universityId:t,universitySlug:r,skip:"chat"!==o||!t&&!r}),a=i.data,l=i.loading,c=i.error,u=(0,m.useMemo)((function(){var e,n,o,i,l,c,u,s;return{universityId:null!==(e=null!=t?t:null==a||null===(n=a.university)||void 0===n?void 0:n.id)&&void 0!==e?e:"",universityName:null!==(o=null!=r?r:null==a||null===(i=a.university)||void 0===i?void 0:i.name)&&void 0!==o?o:"",universitySlug:null!==(l=null!=r?r:null==a||null===(c=a.university)||void 0===c?void 0:c.slug)&&void 0!==l?l:"",widgetUrl:null!==(u=null==a||null===(s=a.university)||void 0===s?void 0:s.widgetUrl)&&void 0!==u?u:void 0}}),[t,r,a]);return c||!t&&!r?m.createElement(V,null):l?null:m.createElement(J.Provider,{value:u},n)},X=r(8267);function Q(){return Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Q.apply(null,arguments)}var ee,te=function(e){return m.createElement("svg",Q({xmlns:"http://www.w3.org/2000/svg",width:189,height:133,fill:"none"},e),m.createElement("path",{fill:"#000",d:"M91.86 35.657a.583.583 0 0 1-.064-1.165 345.466 345.466 0 0 1 55.778-1.58.592.592 0 0 1 .556.614.588.588 0 0 1-.615.556c-18.569-.972-37.273-.445-55.59 1.575h-.065ZM68.42 22.169c-.264-.68-.51-1.329-.761-1.973a2.954 2.954 0 0 0-1.704-1.71l-1.656-.631c-.106-.041-.211-.077-.317-.112v-.04c.035-.018.076-.042.112-.053.59-.229 1.176-.451 1.768-.68a3.105 3.105 0 0 0 1.791-1.79c.228-.598.457-1.19.685-1.786.012-.036.035-.07.064-.135.041.064.07.1.088.146.228.597.463 1.2.69 1.798.311.807.95 1.445 1.757 1.75l.79.299c.34.128.674.269 1.013.41.035.017.07.04.117.07-.316.117-.614.228-.907.34-.346.134-.697.262-1.042.397-.685.264-1.464 1.036-1.727 1.721l-.685 1.797c-.018.047-.041.094-.082.17l.006.012ZM134.618 94.719a135.49 135.49 0 0 0-.445-1.153 1.72 1.72 0 0 0-1.001-1.001 192.43 192.43 0 0 0-.971-.37c-.059-.023-.123-.04-.188-.063v-.024l.065-.035c.345-.135.69-.263 1.036-.398a1.814 1.814 0 0 0 1.048-1.048c.134-.351.269-.697.404-1.048.005-.023.017-.04.035-.076.023.035.041.058.052.088l.404 1.053c.182.475.556.85 1.031 1.025.152.059.31.117.462.176.199.076.392.158.591.24.024.011.041.023.071.04l-.533.2c-.205.076-.41.158-.609.234-.404.152-.86.609-1.013 1.007l-.404 1.053c-.011.03-.023.053-.046.1h.011ZM91.86 47.904a.586.586 0 0 1-.076-1.165c23.668-3.074 47.84-3.876 71.841-2.395a.59.59 0 0 1 .551.62.589.589 0 0 1-.621.551c-23.926-1.481-48.021-.679-71.62 2.389h-.075ZM91.86 59.413a.58.58 0 0 1-.58-.527.594.594 0 0 1 .527-.644 316.346 316.346 0 0 1 46.429-1.2.585.585 0 1 1-.059 1.17c-15.455-.737-31.015-.339-46.253 1.195h-.059l-.006.006ZM44.488 53.02c-.193 0-.38-.1-.486-.263l-4.97-7.517-2.084 1.042a.591.591 0 0 1-.785-.257l-14.5-28.042a.59.59 0 0 1 .123-.702.59.59 0 0 1 .708-.065l29.476 18.64a.585.585 0 0 1-.082 1.03L46.836 39.1l-1.277.849 1.57 1.569c.14.14.198.34.157.538l-2.23 10.503a.582.582 0 0 1-.574.462h.006Zm-5.257-9.12c.193 0 .375.093.486.263l4.49 6.785 1.873-8.822-1.85-1.844a.592.592 0 0 1-.17-.475.572.572 0 0 1 .258-.427l1.915-1.276s.058-.035.087-.047l4.087-1.791-26.719-16.901L36.93 44.977l2.032-1.019a.603.603 0 0 1 .263-.064l.006.005Z"}),m.createElement("path",{fill:"#000",d:"M39.231 45.064a.578.578 0 0 1-.491-.269L21.692 18.03a.586.586 0 0 1 .123-.767.583.583 0 0 1 .779.041L45.062 39.45a.578.578 0 0 1 0 .826.578.578 0 0 1-.825 0l-18.78-18.517 14.272 22.404a.582.582 0 0 1-.181.808.569.569 0 0 1-.317.093Z"}),m.createElement("path",{fill:"#000",d:"M46.56 39.17a.589.589 0 0 1-.38-.141l-24.376-20.87a.585.585 0 1 1 .76-.89l24.377 20.87a.585.585 0 0 1-.38 1.03ZM170.832 93.296c-.837 0-1.645-.415-1.768-.48l-9.209-5.303c-3.348-1.956-10.203-1.98-10.274-1.98h-31.7c-19.64 0-26.724-5.473-27.01-5.701-22.86-14.98-17.346-41.406-17.288-41.67 3.542-15.39 13.067-22.837 20.431-26.378 7.968-3.829 14.998-4.016 15.291-4.022h34.106c2.248 0 4.262.158 6.153.474 7.148 1.212 13.517 4.11 18.926 8.617 12.423 10.35 17.2 27.573 11.884 42.858-3.77 10.848-10.894 16.24-11.638 16.784l3.922 14.161a.369.369 0 0 1 .018.117c.076 1.09-.199 1.844-.814 2.242a1.875 1.875 0 0 1-1.03.281ZM109.317 8.933c-.059 0-7.095.193-14.84 3.922-7.119 3.43-16.328 10.643-19.758 25.559-.053.252-5.386 25.904 16.83 40.47.112.087 7.166 5.479 26.326 5.479h31.701c.292 0 7.241.023 10.859 2.137l9.191 5.292c.339.181 1.212.492 1.598.24.287-.187.304-.755.287-1.118l-4.642-16.784a.587.587 0 0 1 .409-.72.582.582 0 0 1 .72.41l.404 1.463c1.587-1.27 7.599-6.55 10.871-15.946 5.158-14.829.521-31.537-11.526-41.576-5.246-4.373-11.428-7.183-18.371-8.36-1.832-.31-3.781-.462-5.959-.462h-34.094l-.006-.006Z"}),m.createElement("path",{fill:"#000",d:"M17.817 126.197a1.87 1.87 0 0 1-1.03-.281c-.615-.399-.89-1.154-.814-2.243 0-.041.011-.076.017-.117l4.66-16.842a.592.592 0 0 1 .72-.41c.31.088.492.41.41.72l-4.642 16.784c-.018.363 0 .931.287 1.118.386.252 1.252-.058 1.61-.252l9.179-5.286c3.612-2.107 10.56-2.131 10.86-2.131h31.7c19.166 0 26.214-5.397 26.284-5.45 12.112-7.944 15.964-19.06 17.077-26.999a.582.582 0 0 1 .661-.498c.322.047.545.34.498.662-1.142 8.178-5.117 19.635-17.55 27.784-.247.199-7.324 5.672-26.97 5.672h-31.7c-.071 0-6.926.024-10.269 1.973l-9.197 5.298c-.134.07-.942.486-1.785.486l-.006.012ZM73.724 41.833H46.56a.587.587 0 0 1-.585-.586c0-.322.264-.585.585-.585h27.164c.322 0 .585.263.585.585a.587.587 0 0 1-.585.586Z"}),m.createElement("path",{fill:"#000",d:"M20.305 109.548a.612.612 0 0 1-.34-.106c-.316-.222-7.792-5.608-11.69-16.819-5.316-15.285-.539-32.508 11.883-42.858a39.032 39.032 0 0 1 14.753-7.692c.31-.088.632.1.72.41.088.31-.1.632-.41.72a37.908 37.908 0 0 0-14.313 7.464C8.86 60.707 4.224 77.414 9.38 92.243c3.77 10.842 11.187 16.198 11.263 16.251a.583.583 0 0 1-.34 1.059v-.005ZM54.306 77.362a.567.567 0 0 1-.404-.164 191.702 191.702 0 0 1-13.646-14.46.585.585 0 1 1 .89-.761c4.349 5.105 8.91 9.94 13.557 14.372a.578.578 0 0 1 .018.825.577.577 0 0 1-.421.182l.006.006ZM129.449 114.114c-2.793 0-6.094-.223-9.905-.673-.246-.024-25.811-2.974-55.954-27.667a.586.586 0 1 1 .743-.907c29.845 24.458 55.088 27.385 55.339 27.409 14.981 1.762 19.237-.322 20.174-2.383 1.141-2.511-2.26-6.375-3.665-7.646a.584.584 0 1 1 .785-.866c.234.211 5.672 5.193 3.945 8.998-1.136 2.5-4.911 3.735-11.462 3.735ZM68.42 64.003a.547.547 0 0 1-.264-.065c-3.518-1.762-13.576-13.137-14.003-13.617a.579.579 0 0 1 .053-.825.585.585 0 0 1 .825.053c.106.117 10.333 11.685 13.652 13.347a.592.592 0 0 1 .263.785.59.59 0 0 1-.526.322Z"}),m.createElement("path",{fill:"#000",d:"M132.721 108.078a.584.584 0 0 1-.269-1.101c1.03-.544 1.552-1.246 1.587-2.148.175-4.543-11.346-12.861-15.795-15.683a.586.586 0 0 1 .627-.99c.679.428 16.573 10.573 16.338 16.714-.052 1.329-.796 2.388-2.207 3.138a.577.577 0 0 1-.275.07h-.006ZM119.239 109.805a.579.579 0 0 1-.169-.023c-1.118-.34-27.55-8.442-36.366-17.258a.583.583 0 1 1 .825-.826c8.612 8.612 35.611 16.884 35.88 16.966a.585.585 0 0 1-.17 1.147v-.006ZM78.618 83.186a.547.547 0 0 1-.252-.058c-5.392-2.611-18.792-16.977-19.36-17.586a.583.583 0 1 1 .855-.796c.135.146 13.816 14.817 19.014 17.328a.58.58 0 0 1 .27.785c-.1.21-.31.327-.527.327ZM39.776 87.425a6.358 6.358 0 1 0 0-12.715 6.358 6.358 0 0 0 0 12.715Z"}),m.createElement("path",{fill:"#000",d:"M77.967 87.425a6.358 6.358 0 1 0 0-12.715 6.358 6.358 0 0 0 0 12.715ZM58.872 87.425a6.358 6.358 0 1 0 0-12.715 6.358 6.358 0 0 0 0 12.715Z"}))};var re,ne,oe=X.default.a(ee||(re=["\n    font-weight: bold;\n    text-decoration: underline;\n    cursor: pointer;\n    color: ",";\n"],ne||(ne=re.slice(0)),ee=Object.freeze(Object.defineProperties(re,{raw:{value:Object.freeze(ne)}}))),(function(e){return e.theme.colors.blue600}));function ie(e){var t=e.widgetUrl;return m.createElement(y.Ss2,{height:"100vh",justifyContent:"center",bgColor:"grey50"},m.createElement(y.Ss2,null,m.createElement(y.BJc,{space:"medium",align:"center"},m.createElement(te,null),m.createElement(y.DZT,{size:"small",level:"2"},"We'll be back soon!"),m.createElement(y.azJ,{w:"100%",display:"flex",justifyContent:"center"},m.createElement(y.azJ,{marginX:["small","xlarge"],paddingX:"small-medium"},t?m.createElement(y.EYj,{size:"small",color:"grey600",align:"center"},"We’ve encountered an unexpected issue. Please try again later, or ",m.createElement(oe,{href:t},"chat to our ambassadors whilst you wait.")):m.createElement(y.EYj,{size:"small",color:"grey600",align:"center"},"We’ve encountered an unexpected issue. Please try again later."))))))}function ae(e){return e instanceof Error?e.message:e}function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(){ce=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==le(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(le(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ue(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var he=(0,m.createContext)({loading:!0,error:void 0,conversationId:void 0,messages:[],userHasSentMessage:null,feedback:null,leadGenerated:null,token:void 0});function de(){return(0,m.useContext)(he)}var me=function(e){var t,r,n,o,i=e.children,a=(0,E.useErrorReporting)().reportError,l=Y(),c=l.universityId,u=l.widgetUrl,s=se((0,m.useState)(null),2),f=s[0],h=s[1],d=se((0,y.Mjh)("".concat("ASSISTANT_CONVERSATION_ID_KEY","-").concat(c),""),2),p=d[0],v=d[1],g=se((0,y.Mjh)("".concat("ASSISTANT_CONVERSATION_TOKEN_KEY","-").concat(c),""),2),b=g[0],w=g[1],S=se((0,y.Mjh)("".concat("ASSISTANT_CONVERSATION_STARTED","-").concat(c),!1),2),x=S[0],O=S[1],A=function(e){var t=C(C({},T),e);return k.IT(R,t)}({variables:{id:p,universityId:c,token:b&&""!==b?b:void 0},skip:!p}),I=A.data,L=A.loading,P=A.error,_=function(e){var t=C(C({},T),e);return j.n(q,t)}(),N=se(_,2),M=N[0],z=N[1],G=z.loading,F=z.error,U=(0,m.useMemo)((function(){var e,t,r,n,o,i;return{messages:null!==(e=null==I||null===(t=I.getAssistantConversation)||void 0===t?void 0:t.messages)&&void 0!==e?e:[],loading:G||L,error:P,conversationId:p,userHasSentMessage:f,feedback:null!==(r=null==I||null===(n=I.getAssistantConversation)||void 0===n?void 0:n.feedback)&&void 0!==r?r:null,leadGenerated:null!==(o=null==I||null===(i=I.getAssistantConversation)||void 0===i?void 0:i.leadGenerated)&&void 0!==o?o:null,token:b&&""!==b?b:void 0}}),[G,L,p,b,P,f,null==I||null===(t=I.getAssistantConversation)||void 0===t?void 0:t.messages,null==I||null===(r=I.getAssistantConversation)||void 0===r?void 0:r.feedback,null==I||null===(n=I.getAssistantConversation)||void 0===n?void 0:n.leadGenerated]);return(0,m.useEffect)((function(){var e=function(e){"chatVisible=true"===e.data&&O(!0)};return window.addEventListener("message",e,!0),function(){window.removeEventListener("message",e)}}),[O]),(0,m.useEffect)((function(){I&&!I.getAssistantConversation&&v("")}),[I,v]),(0,m.useEffect)((function(){var e=function(){var e,t=(e=ce().mark((function e(){var t,r,n,o,i;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G||!c){e.next=18;break}return e.prev=1,e.next=4,M({variables:{universityId:c}});case 4:if(r=e.sent,null===(t=r.data)||void 0===t||!t.createAssistantConversation.id){e.next=11;break}i=null!==(n=null===(o=r.data)||void 0===o?void 0:o.createAssistantConversation.token)&&void 0!==n?n:"",v(r.data.createAssistantConversation.id),w(i),e.next=12;break;case 11:throw new Error("Could not create conversation. Try again later.");case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0),a(new Error("Error while creating conversation: ".concat(ae(e.t0))));case 18:case"end":return e.stop()}}),e,null,[[1,14]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){ue(i,n,o,a,l,"next",e)}function l(e){ue(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}();window.self===window.top&&O(!0),""===p&&!F&&x&&e()}),[M,F,G,p,v,c,x,O,a,w]),(0,m.useEffect)((function(){var e;if(!f&&(null!=I&&null!==(e=I.getAssistantConversation)&&void 0!==e&&e.messages))for(var t=0;t<I.getAssistantConversation.messages.length;t++){if(I.getAssistantConversation.messages[t].sender!==D.Assistant){h(!0);break}t===I.getAssistantConversation.messages.length-1&&h(!1)}}),[null==I||null===(o=I.getAssistantConversation)||void 0===o?void 0:o.messages,f]),P||F?m.createElement(ie,{widgetUrl:u}):m.createElement(he.Provider,{value:U},i)},pe=r(7956),ye={name:"Product Opened",requiredFields:["product","universitySlug"]},ve={name:"Product Closed",requiredFields:["product","universitySlug"]},ge={name:"Question Prompt Clicked",requiredFields:["product","cta","universitySlug"]},be={name:"Button Clicked",requiredFields:["product","cta","universitySlug"]},we={name:"Email Collection Visible",requiredFields:["product","universitySlug"]},Ee={name:"Button Clicked",requiredFields:["product","cta","where","universitySlug"]},Se={name:"Button Clicked",requiredFields:["product","cta","where","universitySlug"]},xe={name:"Conversation Rating Collection Visible",requiredFields:["product","universitySlug"]},Oe={name:"Button Clicked",requiredFields:["product","cta","where","universitySlug"]},je={name:"Button Clicked",requiredFields:["product","conversationRating","cta","where","universitySlug"]},ke={name:"Button Clicked",requiredFields:["product","cta","where","universitySlug"]},Ae={name:"Button Clicked",requiredFields:["product","cta","where","universitySlug"]},Ie={name:"Ambassador Recommended",requiredFields:["product","conversationId","buddyType","universitySlug"]},Ce={name:"Assistant Chat Now Clicked",requiredFields:["product","conversationId","buddyType","universitySlug"]},Le={name:"Button Clicked",requiredFields:["product","cta","universitySlug"]};function Pe(e){return Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pe(e)}function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){Me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return De(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?De(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Me(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Pe(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Pe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qe=function(e){return e.SMALL_DEVICE="isSmallDevice",e.CHAT_VISIBLE="chatVisible",e.SHOW_CTA_ACTIONS="showCTAActions",e}({}),ze=Me(Me(Me({},qe.SMALL_DEVICE,!1),qe.CHAT_VISIBLE,!1),qe.SHOW_CTA_ACTIONS,!1),Re=(0,m.createContext)(ze);function Ge(){return(0,m.useContext)(Re)}function Fe(e){return"ASSISTANT_CONNECTION_".concat(e)}var Ue=function(e){var t,r,n=e.children,o=new URLSearchParams(window.location.search),i=null!==(t=o.get("parentUrl"))&&void 0!==t?t:"*",a=null!==(r=o.get("render"))&&void 0!==r?r:"*",l=Ne((0,m.useState)(ze),2),c=l[0],u=l[1],s=Y(),f=s.universityId,h=s.universitySlug,d=Fe(f),p="true"===window.sessionStorage.getItem(d),y=(0,S.st)().trackEvent;return(0,m.useEffect)((function(){function e(e){var t=function(e){if("string"==typeof e.data){var t=Ne(e.data.split("="),2);return{eventType:t[0],value:"true"===t[1]}}}(e);t&&t.eventType in ze&&(u((function(e){return _e(_e({},e),{},Me({},t.eventType,t.value))})),t.eventType===qe.CHAT_VISIBLE&&"chat"===a&&(!0===t.value?y(ye.name,{product:"Assistant",universitySlug:h}):!1===t.value&&y(ve.name,{product:"Assistant",universitySlug:h})),t.eventType!==qe.CHAT_VISIBLE||p||window.sessionStorage.setItem(d,"true"))}return window.addEventListener("message",(function(t){var r=i.startsWith(t.origin),n=i.startsWith("file://");i&&(r||n)&&e(t)})),function(){window.removeEventListener("message",e)}}),[f,p,d,i,a,y,h]),m.createElement(Re.Provider,{value:c},n)};function Be(){var e,t=null!==(e=new URLSearchParams(window.location.search).get("parentUrl"))&&void 0!==e?e:"*",r=(0,E.useErrorReporting)().reportError;return{postMessage:function(e){try{window.parent.postMessage(e,t.startsWith("file://")?"*":t)}catch(e){console.error("Error posting message",e),r(new Error("Error posting message from usePostMessage hook: ".concat(ae(e))))}}}}function We(e){return We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},We(e)}function $e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Je(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=We(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=We(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==We(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ze=(0,m.createContext)({isSmallDeviceDimension:!1,isSmallInnerHeight:!1});function Ke(){return(0,m.useContext)(Ze)}var Xe,Qe=function(e){var t=e.children,r=Be().postMessage,n=Ye((0,m.useState)(window.innerHeight<550),2),o=n[0],i=n[1],a=Ge().isSmallDevice,l=(0,m.useMemo)((function(){return{isSmallDeviceDimension:a}}),[a]);(0,m.useEffect)((function(){r("updateWidth")}),[]),(0,m.useEffect)((function(){var e=function(){i(window.innerHeight<550)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var c=(0,m.useMemo)((function(){return He(He({},l),{},{isSmallInnerHeight:o})}),[l,o]);return m.createElement(Ze.Provider,{value:c},t)},et=function(e){var t=e.children,r=Ke().isSmallDeviceDimension;return m.createElement(y.Ss2,{paddingX:"xxsmall",bgColor:"grey50",paddingBottom:r?"none":"xxsmall"},m.createElement(pe.iC,null,t))},tt=y.Tj4.grey900,rt=y.Tj4.grey700,nt={colors:{primaryColor:tt,primaryHoverColor:rt},Button:{colors:{primary:{color:"white",bgColor:tt,borderColor:tt,hoverBgColor:rt,outlineColor:y.Tj4.blue500,clearColor:tt,clearHoverBgColor:y.Tj4.grey50}}}},ot={Button:{colors:{chat:{color:y.Tj4.grey700,bgColor:y.Tj4.grey200,borderColor:"transparent",hoverBgColor:y.Tj4.grey200,outlineColor:y.Tj4.grey700,clearColor:y.Tj4.grey700,clearHoverBgColor:y.Tj4.grey200},activeChat:{color:"white",bgColor:tt,borderColor:"transparent",hoverBgColor:rt,outlineColor:y.Tj4.blue400,clearColor:y.Tj4.grey600,clearHoverBgColor:y.Tj4.grey100}}},chat:{disabled:{backgroundColor:y.Tj4.grey200},footer:{backgroundColor:y.Tj4.grey50},input:{color:y.Tj4.grey700,backgroundColor:"white",boxShadow:"0px 2px 12px rgba(0, 0, 0, 0.08)",paddingTop:"10px",placeholderColor:y.Tj4.grey700},message:{backgroundColor:tt,textColor:"white",linkColor:"white",altBackgroundColor:"white",altTextColor:y.Tj4.grey900,altLinkColor:y.Tj4.blue600},scroll:{backgroundColor:y.Tj4.grey50,gradientBgColorTop:"#FFFFFF00",gradientBgColorBottom:"white"}}},it=function(){return m.createElement(pe.cW,null,m.createElement(y.Ss2,{paddingX:"xsmall",paddingTop:"small-medium",height:"100%",bgColor:ot.chat.scroll.backgroundColor},m.createElement(pe.im,{align:"left",position:"orphan"},m.createElement(pe._x,{align:"left",position:"orphan"},m.createElement(y.azJ,{width:"200px",height:"64px"},m.createElement(y.WAx,{"aria-hidden":"true"},m.createElement("rect",{x:"0",y:"0",rx:"4",ry:"4",width:"200",height:"16"}),m.createElement("rect",{x:"0",y:"24",rx:"4",ry:"4",width:"200",height:"16"}),m.createElement("rect",{x:"0",y:"48",rx:"4",ry:"4",width:"100",height:"16"})))))),m.createElement(et,null,m.createElement(pe.VA,{onSend:function(){},disabled:!0})))},at=r(4803),lt=r(6135);var ct=(0,X.default)(y.azJ)(Xe||(Xe=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    border-radius: 0 8px 8px;\n"])));function ut(e){var t=e.metadata,r=(0,y.TT0)(),n=(0,S.st)().trackEvent,o=de().conversationId,i=Y().universitySlug;return m.createElement(y.Ss2,{position:"relative",borderRadius:"small",padding:"medium-large",maxW:["75vw",400],minW:"auto",borderWidth:1,borderColor:"grey150",bgColor:"white"},m.createElement(y.BJc,{space:"medium"},m.createElement(y.azJ,{display:"flex",gap:"small",alignItems:"center"},m.createElement(y.azJ,{h:"85px",w:"85px",position:"relative",flexShrink:0},m.createElement(y.azJ,{flexShrink:0,as:"img",alt:"Profile picture, ".concat(t.firstName),borderRadius:"full",height:"100%",width:"100%",src:t.profilePhoto}),m.createElement(y.azJ,{position:"absolute",bottom:"0",left:"0",right:"0",marginX:"auto",bgColor:"grey900",width:"fit-content",borderRadius:"full",padding:"xsmall"},m.createElement(y.EYj,{align:"center",size:"small",color:"white",truncate:1},t.accountRole===N.Ambassador?"Student":"Staff"))),m.createElement(y.BJc,{space:"small-medium"},m.createElement(y.DZT,{level:"3",size:"xxsmall",color:"grey950",truncate:1},t.firstName),m.createElement(y.EYj,{color:"grey800",truncate:1},t.accountRole===N.Ambassador?t.degreeName:t.role),t.accountRole===N.Ambassador&&m.createElement(y.EYj,{color:"grey800",truncate:1},t.countryName))),m.createElement(ct,{bgColor:"grey50",padding:"small"},m.createElement(y.EYj,{truncate:4},t.bio)),m.createElement(y.vxq,{color:"primary",ghost:!0,to:t.profileUrl,onClick:function(){n(Ce.name,{product:"Assistant",conversationId:o,buddyType:t.accountRole===N.Staff?"Staff":"Student",universitySlug:i})},external:!0,block:!0,target:"_blank",rel:"noreferrer noopener"},m.createElement(y.EYj,{weight:"bold",color:r.colors.primaryColor},"Chat to ",t.firstName))))}var st=r(4364),ft=r(9141),ht=r(4997),dt="1.125rem",mt="1rem",pt="1rem",yt={heading:function(e,t){var r=t+1,n=1===t?dt:mt;return"<h".concat(r,' style="margin:0;font-size:').concat(n,';">').concat(e,"</h").concat(r,">")},paragraph:function(e){return'<p style="font-size:'.concat(pt,'">').concat(e,"</p>")},list:function(e,t){var r=t?"ol":"ul";return"<".concat(r,' style="display:grid;gap:8px;font-size:').concat(pt,';">').concat(e,"</").concat(r,">")},listitem:function(e){return'<li style="display:list-item">'.concat(e,"</li>")},image:function(){return""},link:function(e,t,r){return'<a href="'.concat(e,'">').concat(r,"</a>")}},vt=r(7310),gt=r(954),bt=new vt.c3("assistant-conversation",{private:!1}),wt=new vt.Jh("assistant-writing",bt),Et=new vt.Jh("assistant-writing-end",bt);function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=St(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==St(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return At(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?At(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(r),!0).forEach((function(t){Pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ct(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=It(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==It(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tt(e){return function(e){if(Array.isArray(e))return _t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_t(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Nt(e){var t,r,n,o=e.client,i=e.socketMessage,a=e.conversationId,l=e.universityId,c=e.token,u=o.readQuery({query:R,variables:{id:a,universityId:l,token:c}});if(null==u||!u.getAssistantConversation)return console.error("Couldn't read from cache"),!1;if(u.getAssistantConversation.messages.find((function(e){return e.id===i.id})))return!1;var s=i.metadata?{ambassadorProfile:null!==(t=i.metadata.ambassadorProfile)&&void 0!==t?t:null,staffProfile:null!==(r=i.metadata.staffProfile)&&void 0!==r?r:null}:null,f=[].concat(Tt((null===(n=u.getAssistantConversation)||void 0===n?void 0:n.messages)||[]),[{__typename:"AssistantConversationMessage",id:i.id,sender:D.Assistant,createdAt:i.createdAt,message:i.message,metadata:s,feedback:null,universityId:l}]);return o.writeQuery({query:R,variables:{id:a,universityId:l,token:c},data:Lt(Lt({},u),{},{getAssistantConversation:Lt(Lt({},u.getAssistantConversation),{},{messages:f})})}),!0}function Dt(e){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(e)}function Mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(r),!0).forEach((function(t){zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Dt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Dt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rt(e){var t=e.client,r=e.socketMessage;t.cache.updateFragment({fragment:M,id:"AssistantConversationMessage:"+r.id},(function(e){var t,n,o=r.metadata?{ambassadorProfile:null!==(t=r.metadata.ambassadorProfile)&&void 0!==t?t:null,staffProfile:null!==(n=r.metadata.staffProfile)&&void 0!==n?n:null}:null;if(e&&!(r.message.length<=e.message.length))return qt(qt({},e),{},{message:r.message,metadata:o})}))}function Gt(e){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(e)}function Ft(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ut(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(r),!0).forEach((function(t){Bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Gt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wt(e,t){var r;if(null!=e&&e.getAssistantConversation){var n=null==e||null===(r=e.getAssistantConversation)||void 0===r?void 0:r.messages;return Ut(Ut({},e),{},{getAssistantConversation:Ut(Ut({},e.getAssistantConversation),{},{messages:t(null!=n?n:[])})})}}function $t(e,t,r,n){return{__typename:"AssistantConversationMessage",id:e,sender:r,createdAt:(new Date).toISOString(),message:t,universityId:n,metadata:null,feedback:null}}var Ht=256;function Jt(e){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(e)}function Yt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yt(Object(r),!0).forEach((function(t){Zt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Jt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Jt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kt(e){return function(e){if(Array.isArray(e))return er(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||Qt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e,t){if(e){if("string"==typeof e)return er(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(e,t):void 0}}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function tr(){tr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Jt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Jt(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function rr(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function nr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){rr(i,n,o,a,l,"next",e)}function l(e){rr(i,n,o,a,l,"throw",e)}a(void 0)}))}}var or,ir,ar,lr,cr,ur=function(e){return e.USER_CAN_SEND_MESSAGE="USER_CAN_SEND_MESSAGE",e.SENDING_USER_MESSAGE="SENDING_USER_MESSAGE",e.ASSISTANT_PROCESSING_RESPONSE="ASSISTANT_PROCESSING_RESPONSE",e.ASSISTANT_PROCESSING_TIMEOUT="ASSISTANT_PROCESSING_TIMEOUT",e.ASSISTANT_IS_TYPING="ASSISTANT_IS_TYPING",e}({}),sr=(0,m.createContext)({onSendMessage:(or=nr(tr().mark((function e(){return tr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),function(){return or.apply(this,arguments)}),messages:[],error:void 0,updateAssistantMessage:function(){},conversationState:ur.USER_CAN_SEND_MESSAGE});function fr(){return(0,m.useContext)(sr)}function hr(e){var t=e.children,r=(0,E.useErrorReporting)().reportError,n=Be().postMessage,o=(0,S.st)().trackEvent,i=(0,gt.m)(),a=Y(),l=a.universityId,c=a.universitySlug,u=Xt((0,m.useState)([]),2),s=u[0],f=u[1],h=de(),d=h.messages,p=h.error,y=h.conversationId,v=h.token,g=function(e){var t=C(C({},T),e);return j.n(H,t)}(),b=Xt(g,1)[0],w=Xt((0,m.useState)(ur.USER_CAN_SEND_MESSAGE),2),x=w[0],O=w[1],k=(0,m.useCallback)((function(e,t){for(var r=[],o=0;o<localStorage.length;o++){var i=localStorage.key(o);i&&(i.includes(e)||i.includes(t))&&r.push(i)}r.forEach((function(e){localStorage.removeItem(e)})),n("chatVisible=false")}),[n]),A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initialInterval,r=void 0===t?3e4:t,n=e.subsequentInterval,o=void 0===n?1e4:n,i=(0,E.useErrorReporting)().reportError,a=kt((0,m.useState)(null),2),l=a[0],c=a[1];return(0,m.useEffect)((function(){if(l&&!l.stopped){var t=setInterval((function(){var t=Date.now(),n=l.activityCount>1?o:r;if(l&&t-l.timestamp>n){var a;null===(a=e.callback)||void 0===a||a.call(e),c(null);var u="Error: No activity detected in the last ".concat(n/1e3," seconds.");console.error(u),i(new Error(u))}}),100);return function(){clearInterval(t)}}}),[e,r,l,i,o]),{logActivity:(0,m.useCallback)((function(e){var t=Date.now();c((function(r){return null!=r&&r.stopped&&e===(null==r?void 0:r.id)?r:{timestamp:t,activityCount:((null==r?void 0:r.activityCount)||0)+1,stopped:!1,id:e}}))}),[]),stopActivityCheck:(0,m.useCallback)((function(){c((function(e){return e?Ot(Ot({},e),{},{stopped:!0,activityCount:0}):null}))}),[])}}({callback:(0,m.useCallback)((function(){y&&(O(ur.ASSISTANT_PROCESSING_TIMEOUT),Nt({client:i,universityId:l,conversationId:y,token:v,socketMessage:{id:Date.now().toString(),message:"Something went wrong. Please refresh and try again.",chunkIndex:0,createdAt:(new Date).toISOString(),universityId:l,sender:D.System}}))}),[i,y,l,v])}),I=A.logActivity,L=A.stopActivityCheck;(0,m.useEffect)((function(){if(y&&s.length>0){var e=Kt(s).sort((function(e,t){return e.chunkIndex-t.chunkIndex})),t=e.map((function(e){return e.message})).join(""),r=Vt(Vt({},e[e.length-1]),{},{message:t,metadata:void 0});if(1==e[0].chunkIndex)Nt({client:i,universityId:l,conversationId:y,token:v,socketMessage:r})?O(ur.ASSISTANT_IS_TYPING):Rt({client:i,socketMessage:r})}}),[i,y,s,l,v]);var P=(0,m.useCallback)((function(e,t,r,n){var o=Wt(i.readQuery({query:R,variables:{id:e,universityId:t,token:r}}),n);o&&i.writeQuery({query:R,variables:{id:e,universityId:t,token:r},data:o})}),[i]),_=(0,m.useCallback)(function(){var e=nr(tr().mark((function e(t){var n;return tr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"/clear"!==t.toLowerCase().trim()){e.next=8;break}return k(l,y),i.clearStore(),window.location.reload(),e.abrupt("return");case 8:if(!(t.length>Ht)){e.next=10;break}throw new Error("Chat message is over character limit");case 10:return n=function(e){return e.concat($t("optimistic-message-".concat((new Date).toISOString()),t,D.User,l))},P(y,l,v,n),O(ur.SENDING_USER_MESSAGE),f([]),e.next=16,b({variables:{conversationId:y,input:t,universityId:l,token:v},fetchPolicy:"no-cache"});case 16:I("start"),O(ur.ASSISTANT_PROCESSING_RESPONSE),e.next=25;break;case 20:throw e.prev=20,e.t0=e.catch(2),console.error(e.t0),r(new Error("Error while sending message: ".concat(ae(e.t0)))),e.t0;case 25:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),[y,P,l,v,b,I,k,i,r]),N=(0,m.useCallback)((function(e,t){y&&i.cache.updateQuery({query:R,variables:{id:y,universityId:l,token:v}},(function(r){return Wt(r,(function(r){return r.map((function(r){return r.id===e?Vt(Vt({},r),t):r}))}))}))}),[l,y,v,i.cache]),M=(0,m.useCallback)((function(e){I(e.id);try{f((function(t){return[].concat(Kt(t),[e])}))}catch(e){console.error("Error handling assistant write message"),console.error(e),r(new Error("Error handling assistant write message: ".concat(ae(e))))}}),[r,I]),q=(0,m.useCallback)((function(e){L();try{var t,n;if(null!=e&&e.metadata)o(Ie.name,{product:"Assistant",conversationId:y,buddyType:null!=e&&null!==(n=e.metadata)&&void 0!==n&&n.staffProfile?"Staff":"Student",universitySlug:c});Rt({client:i,socketMessage:Vt(Vt({},e),{},{metadata:null!==(t=e.metadata)&&void 0!==t?t:void 0})}),f([]),O(ur.USER_CAN_SEND_MESSAGE)}catch(e){console.error("Error handling assistant write end message"),console.error(e),r(new Error("Error handling assistant write end message"))}}),[L,i,o,y,c,r]);(0,vt.tq)({event:wt,channelId:null!=y?y:"",onEvent:M}),(0,vt.tq)({event:Et,channelId:null!=y?y:"",onEvent:q});var z=(0,m.useMemo)((function(){return{onSendMessage:_,updateAssistantMessage:N,messages:d,error:p,conversationState:x}}),[x,p,_,N,d]);return m.createElement(sr.Provider,{value:z},t)}function dr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mr=(0,X.keyframes)(ir||(ir=dr(["\n  0%, 100% {\n    opacity: 0.25;\n  }\n  50% {\n    opacity: 1;\n  }\n"]))),pr=(0,X.default)(y.azJ)(ar||(ar=dr(["\n    & :first-child {\n        margin-top: 0;\n    }\n    & :last-child {\n        margin-bottom: 0;\n    }\n\n    ","\n"])),(function(e){return e.$isTyping&&(0,X.css)(lr||(lr=dr(["\n            & :last-child {\n                display: inline;\n            }\n        "])))})),yr=(0,X.default)(y.azJ)(cr||(cr=dr(["\n    animation: "," 0.8s ease-in-out infinite;\n"])),mr);ht.A.addHook("afterSanitizeAttributes",(function(e){e.tagName&&"a"===e.tagName.toLowerCase()&&(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))})),st.xI.use({renderer:yt}),st.xI.use((0,ft.A)());var vr=m.memo((function(e){var t,r=e.message;return m.createElement(y.EYj,{whiteSpace:"pre-wrap",color:null==ot||null===(t=ot.chat)||void 0===t||null===(t=t.message)||void 0===t?void 0:t.textColor},r.message)})),gr=m.memo((function(e){var t,r,n=e.message,o=e.isLast,i=fr().conversationState,a=(0,m.useMemo)((function(){var e=st.xI.parse(n.message);return ht.A.sanitize(e)}),[n.message]);return m.createElement(y.EYj,{whiteSpace:"pre-wrap"},m.createElement(y.azJ,{position:"relative"},m.createElement(pr,{color:null==ot||null===(t=ot.chat)||void 0===t||null===(t=t.message)||void 0===t?void 0:t.altTextColor,dangerouslySetInnerHTML:{__html:a},display:"inline",$isTyping:i===ur.ASSISTANT_IS_TYPING}),m.createElement(yr,{"data-testid":"assistant-typing-cursor",display:o&&i===ur.ASSISTANT_IS_TYPING?"inline-block":"none",marginLeft:"xsmall",width:"12px",height:"12px",bgColor:null==ot||null===(r=ot.chat)||void 0===r||null===(r=r.message)||void 0===r?void 0:r.altTextColor,borderRadius:"full"})))})),br=m.memo((function(e){var t=e.align,r=e.message,n=e.isLast;return"right"===t?m.createElement(vr,{message:r}):m.createElement(gr,{message:r,isLast:n})}));vr.displayName="UserChatMessageText",gr.displayName="AssistantChatMessageText",br.displayName="ChatMessageText";var wr=["color","width","height"];function Er(){return Er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Er.apply(null,arguments)}var Sr=function(e){var t=e.color,r=void 0===t?"currentColor":t,n=e.width,o=void 0===n?"1em":n,i=e.height,a=void 0===i?"1em":i,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,wr);return m.createElement("svg",Er({xmlns:"http://www.w3.org/2000/svg",stroke:r,strokeWidth:1.5,width:o,height:a,viewBox:"0 0 24 24",fill:"none"},l),m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"}))},xr=["color","width","height"];function Or(){return Or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Or.apply(null,arguments)}var jr=function(e){var t=e.color,r=void 0===t?"currentColor":t,n=e.width,o=void 0===n?"1em":n,i=e.height,a=void 0===i?"1em":i,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,xr);return m.createElement("svg",Or({xmlns:"http://www.w3.org/2000/svg",width:o,height:a,viewBox:"0 0 42 42",fill:"none"},l),m.createElement("path",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3.506,d:"M9.621 21.132h24.543M21.893 8.86l12.271 12.273-12.271 12.271"}))},kr=["color","width","height"];function Ar(){return Ar=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ar.apply(null,arguments)}var Ir=function(e){var t=e.color,r=void 0===t?"currentColor":t,n=e.width,o=void 0===n?"1em":n,i=e.height,a=void 0===i?"1em":i,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,kr);return m.createElement("svg",Ar({xmlns:"http://www.w3.org/2000/svg",width:o,height:a,viewBox:"0 0 33.5 33.5",fill:"none"},l),m.createElement("path",{stroke:r,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.792,d:"M8.625 12.812 17 21.187l8.375-8.375"}))},Cr=["color","width","height"];function Lr(){return Lr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lr.apply(null,arguments)}var Pr=function(e){var t=e.color,r=void 0===t?"currentColor":t,n=e.width,o=void 0===n?"24":n,i=e.height,a=void 0===i?"24":i,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Cr);return m.createElement("svg",Lr({xmlns:"http://www.w3.org/2000/svg",width:o,height:a,viewBox:"0 0 24 24",fill:"none"},l),m.createElement("path",{d:"M5 5.25L19 19.25",stroke:r,strokeWidth:"1.5",strokeLinecap:"round"}),m.createElement("path",{d:"M19 5.25L5 19.25",stroke:r,strokeWidth:"1.5",strokeLinecap:"round"}))};function Tr(){return Tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tr.apply(null,arguments)}var _r,Nr=function(e){var t,r;return m.createElement("svg",Tr({xmlns:"http://www.w3.org/2000/svg",style:{margin:0},width:null!==(t=e.width)&&void 0!==t?t:16,height:null!==(r=e.height)&&void 0!==r?r:16,viewBox:"0 0 15 15",fill:"none"},e),m.createElement("path",{stroke:e.color,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:.889,d:"M5.333 14.333h-2A1.333 1.333 0 0 1 2 13V8.333A1.333 1.333 0 0 1 3.333 7h2M10 5.667V3a2 2 0 0 0-2-2L5.333 7v7.333h7.52a1.333 1.333 0 0 0 1.334-1.133l.92-6a1.333 1.333 0 0 0-1.334-1.533H10Z"}))};var Dr,Mr=(0,X.default)(Nr)(_r||(_r=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    transform: rotate(180deg);\n"])));var qr=(0,X.default)(y.lV1)(Dr||(Dr=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    transition: 250ms;\n    padding: 0px;\n    border: none;\n    min-width: 16px;\n    max-height: 16px;\n    > span > svg {\n        fill: ",";\n    }\n    &:hover > span > svg {\n        fill: ",";\n    }\n"])),(function(e){var t=e.isActive,r=e.fillColor;return t?r:""}),(function(e){var t=e.isActive,r=e.fillColor;return t?"":r})),zr=m.memo((function(e){var t=e.isLiked,r=e.onClick;return m.createElement(qr,{isActive:t,fillColor:y.Tj4.teal800,onClick:r,"aria-label":"Like",ghost:!0},m.createElement(Nr,{color:y.Tj4.grey700,height:14}))}));zr.displayName="LikeButton";var Rr=m.memo((function(e){var t=e.isDisliked,r=e.onClick;return m.createElement(qr,{isActive:t,fillColor:y.Tj4.red300,onClick:r,"aria-label":"Dislike",ghost:!0},m.createElement(Mr,{color:y.Tj4.grey700,height:14}))}));function Gr(e){return Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gr(e)}function Fr(){Fr=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Gr(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Gr(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Ur(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function Br(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Ur(i,n,o,a,l,"next",e)}function l(e){Ur(i,n,o,a,l,"throw",e)}a(void 0)}))}}function Wr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $r(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}Rr.displayName="DislikeButton";var Hr=function(e){var t=e.messageId,r=e.messageFeedback,n=(0,E.useErrorReporting)().reportError,o=function(e){var t=C(C({},T),e);return j.n(z,t)}(),i=Wr(o,1)[0],a=fr().updateAssistantMessage,l=(null==r?void 0:r.type)===_.Like,c=(null==r?void 0:r.type)===_.Dislike,u=(0,m.useCallback)(function(){var e=Br(Fr().mark((function e(o){var l;return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(t,{feedback:{__typename:"AssistantMessageFeedback",type:o,freeText:null}}),e.prev=1,e.next=4,i({variables:{messageId:t,type:o}});case 4:(l=e.sent).errors&&n(new Error(l.errors.toString())),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),a(t,{feedback:r}),n(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),[t]),s=(0,m.useCallback)(Br(Fr().mark((function e(){return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u(_.Like);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),[u,l]),f=(0,m.useCallback)(Br(Fr().mark((function e(){return Fr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u(_.Dislike);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])}))),[u,c]);return m.createElement(y.Ss2,{borderTopWidth:1,borderColor:"grey300",marginTop:"small",paddingTop:"small"},m.createElement(y.azJ,{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},m.createElement(y.EYj,{color:"grey700",size:"small"},"Was this helpful?"),m.createElement(y.azJ,{display:"flex",flexDirection:"row",gap:"xsmall"},m.createElement(zr,{onClick:s,isLiked:l}),m.createElement(Rr,{onClick:f,isDisliked:c}))))};function Jr(e){var t=e.align,r=e.formattedTime,n=(0,y.TT0)();return m.createElement(y.cVF,{verticalAlign:"center",space:"xxsmall"},m.createElement(y.EYj,{size:"small",weight:"bold",color:n.colors.primaryColor,lineHeight:"inherit"},"left"===t?"Assistant":"You"),r&&m.createElement(y.EYj,{size:"xxsmall",weight:"bold",lineHeight:"inherit"},"·"),r&&m.createElement(y.EYj,{size:"xxsmall",lineHeight:"inherit"},r))}var Yr,Vr,Zr,Kr,Xr,Qr,en=function(e){return{sender:{id:e.sender}}};function tn(e){var t,r=e.align,n=e.position,o=e.message,i=e.isLast,a=e.isFirst,l=fr().conversationState,c=(0,m.useMemo)((function(){return!!o.feedback}),[o]),u=(0,m.useMemo)((function(){return l===ur.USER_CAN_SEND_MESSAGE&&i&&!a&&o.sender===D.Assistant}),[o,i,a,l]),s=c||u;return m.createElement(pe._x,{align:r,position:n},m.createElement(br,{align:r,message:o,isLast:i}),s&&m.createElement(Hr,{messageId:o.id,messageFeedback:null!==(t=null==o?void 0:o.feedback)&&void 0!==t?t:null}))}function rn(e){var t=e.align,r=e.position,n=e.message,o=e.isLast,i=e.isFirst,a=(0,m.useMemo)((function(){return function(e){for(var t,r,n=0,o=[null==e||null===(t=e.metadata)||void 0===t?void 0:t.staffProfile,null==e||null===(r=e.metadata)||void 0===r?void 0:r.ambassadorProfile];n<o.length;n++){var i=o[n];if(i)return i}return null}(n)}),[n]);return a?m.createElement(y.BJc,{space:"small"},m.createElement(tn,{align:t,position:r,message:n,isLast:o,isFirst:i}),m.createElement(ut,{metadata:a})):m.createElement(y.azJ,{display:"flex",flexDirection:"row"},"right"===t&&m.createElement(y.azJ,{display:["none","block"],w:"30px",h:"1px",flexShrink:0}),m.createElement(tn,{align:t,position:r,message:n,isLast:o,isFirst:i}),"left"===t&&m.createElement(y.azJ,{display:["none","block"],w:"30px",h:"1px",flexShrink:0}))}function nn(e){var t=e.message,r=e.index,n=e.array,o=t.createdAt?(0,lt.A)(new Date(t.createdAt),"k:mm a"):null,i=function(e,t){return(0,pe.IN)({currentMessage:en(null==t?void 0:t[e]),nextMessage:e===t.length-1?void 0:en(null==t?void 0:t[e+1]),previousMessage:0===e?void 0:en(null==t?void 0:t[e-1])})}(r,n),a=t.sender.toLowerCase()==="assistant".toLowerCase()?"left":"right",l=0===r,c=r===n.length-1;return m.createElement(y.azJ,{key:r,paddingX:"xsmall",role:"listitem","aria-live":"polite","aria-atomic":"true"},m.createElement(pe.im,{align:a,position:i,addonTop:("top"===i||"orphan"===i)&&m.createElement(Jr,{align:a,formattedTime:o})},m.createElement(rn,{isFirst:l,isLast:c,align:a,position:i,message:t})))}function on(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var an=(0,X.keyframes)(Yr||(Yr=on(["   \n  0% {\n    transform: scale(1) translateY(0);\n  }\n  30% {\n    transform: scale(1.5) translateY(-2px);\n  }\n  60% {\n    transform: scale(1) translateY(0);\n  }\n  100% {\n    transform: scale(1) translateY(0);\n  }\n"]))),ln=X.default.span(Vr||(Vr=on(["\n    border-radius: 100%;\n    border: 4px solid ",";\n    margin: 4px;\n"])),(function(e){return e.theme.colors.grey600})),cn=(0,X.default)(ln)(Zr||(Zr=on(["\n    animation: "," 1.5s ease-in-out infinite;\n    margin-left: 0;\n"])),an),un=(0,X.default)(ln)(Kr||(Kr=on(["\n    animation: "," 1.5s ease-in-out 0.25s infinite;\n"])),an),sn=(0,X.default)(ln)(Xr||(Xr=on(["\n    animation: "," 1.5s ease-in-out 0.5s infinite;\n    margin-right: 0;\n"])),an),fn=X.default.div(Qr||(Qr=on(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 52px;\n    height: 26px;\n"])));function hn(){return m.createElement(y.azJ,{paddingX:"xsmall",role:"listitem"},m.createElement(pe.im,{align:"left",position:"top"},m.createElement(pe._x,{align:"left",position:"top"},m.createElement(fn,{"data-testid":"dot-container"},m.createElement(cn,null),m.createElement(un,null),m.createElement(sn,null)),m.createElement(y.s6o,null,"Assistant is thinking..."))))}var dn,mn=[{question:"Do you have advice for making my application stronger?"},{question:"Where can I find the module outline?"},{question:"When can I apply for accommodation?"},{question:"How should I write my personal statement?"},{question:"What grades do I need to get in?"},{question:"What are the interviews like?"},{question:"What is the application process like?"},{question:"Is there part-time work at university?"},{question:"What are the dates for the open days?"},{question:"How do I get in touch with the admissions team?"},{question:"How long is the interview?"},{question:"Is the accommodation near to the university?"},{question:"What sports are available?"},{question:"How long does the visa application take?"},{question:"Is the course popular at this uni?"},{question:"What does the course cover?"},{question:"How many modules will I study?"},{question:"Is travel expensive?"},{question:"What is the nightlife like?"},{question:"Is the teaching highly ranked here?"},{question:"What is the campus like?"},{question:"When is the application deadline?"},{question:"What are the entry requirements?"},{question:"Is my attendance monitored?"},{question:"Is there a lot of essays?"},{question:"When will I receive a book list?"},{question:"Does this university offer internships?"},{question:"How far is the train station from the campus?"},{question:"What is the local area like?"},{question:"Why did you choose to join that university?"},{question:"How many people are enrolled on the course?"},{question:"How much are the fees?"},{question:"Can I visit the campus?"},{question:"Is there food near the campus?"},{question:"What kind of questions do they ask at the interview?"},{question:"Does the university offer careers support?"},{question:"What are the career prospects for this course?"},{question:"Can I choose which modules I study?"},{question:"How is the course taught?"},{question:"How many hours do you study each week?"},{question:"Are there ensuite rooms in the dorms?"},{question:"Is university expensive?"},{question:"Can I visit the university at any time?"},{question:"How can I apply for a visa?"},{question:"Is there support with job applications?"},{question:"Does first year count towards the final grade?"},{question:"Can I choose where to do my industry placement?"},{question:"Do you offer bursaries?"},{question:"What are the average monthly living costs?"},{question:"Is the university near to shops?"},{question:"How can I prepare for university?"},{question:"Can you give me some tips for the interview?"},{question:"Can I balance part-time work and my studies?"},{question:"Is there a lot of coursework?"},{question:"Am I able to switch modules?"},{question:"Are there exams on this course?"},{question:"Where can I get books?"},{question:"Where is the university?"},{question:"Does this university get good feedback?"},{question:"How important is my personal statement?"},{question:"Do I need visa to study there?"},{question:"When will I receive my offer?"},{question:"What can you do after university with this degree?"},{question:"Are students safe at the university?"},{question:"When can I visit the university?"},{question:"Is there a gym?"},{question:"Are there interviews for this course?"},{question:"How is the course structured?"},{question:"What kind of modules are available?"},{question:"Can I apply for accommodation if I live nearby?"},{question:"Are there societies or clubs at university?"},{question:"What is the overall satisfaction for this uni?"},{question:"What happens if I miss a class?"},{question:"Does the workload change throughout the year?"},{question:"What kind of internships are available?"},{question:"Are the rooms catered?"},{question:"What kind of support is available?"},{question:"Is the library big or small?"},{question:"What is the parking like at the university?"},{question:"Where does this university rank?"},{question:"How do I get released into Clearing?"},{question:"What are the contact hours?"},{question:"Can I apply for a bursary?"},{question:"Can you tell me about study abroad?"},{question:"When do I pay back student loans?"},{question:"Does the university help students with internship applications?"},{question:"How much are the tuition fees?"},{question:"What types of accommodation are available?"},{question:"Are there any clubs?"},{question:"What is the social life like?"},{question:"How long is the library open?"},{question:"Is the university in a good area?"},{question:"What are the lecturers like?"},{question:"Does this university offer exchanges?"},{question:"Where is the campus?"},{question:"Can you tell me about the living costs?"},{question:"Is there a counselling service?"},{question:"Does the library tend to be busy?"},{question:"What is the nearest train station?"},{question:"What is the criteria for a bursary?"},{question:"What are the tuition fees for international students?"},{question:"How do I sign up for a society?"},{question:"Do students like this university?"},{question:"Which teaching styles are used?"},{question:"Are the exams compulsory?"},{question:"When are the exams?"},{question:"Do students ever fail their exams?"},{question:"What would studying abroad involve?"},{question:"Is the area safe?"},{question:"Is it a safe place to study?"},{question:"Where is the accommodation?"},{question:"What bursaries am I eligible for?"},{question:"How much money will I get with a student loan?"},{question:"How is the student life there?"}];function pn(e){return function(e){if(Array.isArray(e))return gn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||vn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){if(e){if("string"==typeof e)return gn(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gn(e,t):void 0}}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var bn=(0,X.default)(Ir)(dn||(dn=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    transform: rotate(270deg);\n"])));function wn(e){var t=e.max,r=void 0===t?1:t,n=e.rerollValues,o=Math.floor(Math.random()*r);return n.includes(o)?wn({max:r,rerollValues:n}):o===r?o-1:o}function En(){var e=fr().onSendMessage,t=Y().universitySlug,r=(0,S.st)().trackEvent,n=(0,y.TT0)(),o=yn((0,m.useState)([]),2),i=o[0],a=o[1];return i.length<2&&a((function(e){return[].concat(pn(e),[wn({max:mn.length,rerollValues:e})])})),m.createElement(y.Ss2,{bgColor:ot.chat.scroll.backgroundColor,width:"100%",paddingX:"small-medium",marginTop:"small",alignItems:"flex-end"},m.createElement(y.BJc,{space:"small",align:"right"},i.map((function(o){return m.createElement(y.azJ,{key:mn[o].question,as:"button",borderWidth:1,borderColor:n.colors.primaryColor,borderRadius:"xsmall",padding:"small",width:"fit-content",display:"flex",gap:"xxsmall",alignItems:"center",className:"bubble",color:n.colors.primaryColor,_hover:{bgColor:n.colors.primaryColor,color:"white"},onClick:function(){e(mn[o].question),r(ge.name,{product:"Assistant",cta:mn[o].question,universitySlug:t})}},m.createElement(y.EYj,{color:"inherit",align:"left"},mn[o].question),m.createElement(y.azJ,{flexShrink:0,w:"16px",h:"16px",color:"inherit"},m.createElement(bn,null)))}))))}var Sn="ub-assistant-enabled",xn=!1,On="ub-prospect-guidance-ui-show-beta-styles",jn=!1,kn="ub-prospect-guidance-ui-show-suggested-questions",An=!1,In="ub-prospect-guidance-ui-show-standalone-context",Cn=!1,Ln="ub-prospect-guidance-ui-show-conversation-feedback",Pn=!1,Tn="assistant-collect-leads",_n=!1,Nn="ub-prospect-guidance-disable-cta-actions-on-mobile",Dn=!1,Mn="prospect-guidance-message-character-limit",qn=!1,zn=function(e){var t=e.children;return m.createElement(y.azJ,{padding:"small-medium",bgColor:"white",borderBottomWidth:1,borderColor:"grey100"},t)},Rn=r(2664);function Gn(e){return Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(e)}function Fn(){Fn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Gn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Gn(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Un(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var Bn,Wn="Email Collection Popup";function $n(e){var t=e.handleSubmit,r=e.handleDismiss,n=(0,S.st)().trackEvent,o=Y().universitySlug;return(0,m.useEffect)((function(){n(we.name,{product:"Assistant",universitySlug:o})}),[]),m.createElement(y.lVW,{initialValues:{email:"",privacyChecked:!1},validationSchema:{email:Rn.string().email().required(),privacyChecked:Rn.boolean().required()},onSubmit:function(){var e,r=(e=Fn().mark((function e(r,i){var a,l,c;return Fn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=i.setSubmitting)(!0),n(Se.name,{product:"Assistant",cta:"Submit",where:Wn,universitySlug:o}),e.prev=3,c=null!==(l=r.privacyChecked)&&void 0!==l&&l){e.next=8;break}return a(!1),e.abrupt("return");case 8:return e.next=10,t(r.email,c);case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),a(!1);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Un(i,n,o,a,l,"next",e)}function l(e){Un(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()},(function(e){var t,i=e.values,a=e.isSubmitting;return m.createElement(y.BJc,{space:"small"},m.createElement(y.azJ,null,m.createElement(y.EYj,{align:"center",weight:"700"},"Submit your email below so that we can follow up on your chat today")),m.createElement(y.azJ,null,m.createElement(y.gE_,{label:"Email address",id:"email"},m.createElement(y.ksK,{required:!0,type:"email",name:"email",autoComplete:"email",value:null!==(t=i.email)&&void 0!==t?t:""})),m.createElement(y.gE_,{id:"privacypolicy"},m.createElement(y.oVT,{id:"privacy",name:"privacyChecked"},m.createElement(y.EYj,{size:"small"},"By checking the box, you agree to our ",m.createElement("a",{href:"https://unibuddy.com/terms-of-use/",rel:"noreferrer noopener",target:"_blank"},"Terms & Conditions")," and ",m.createElement("a",{href:"https://unibuddy.com/privacy-policy/",rel:"noreferrer noopener",target:"_blank"},"Privacy Policy")," and consent to receive marketing emails from this institution")))),m.createElement(y.azJ,{gap:"small",display:"flex"},m.createElement(y.$nd,{color:"default",ghost:!0,block:!0,size:"sm",onClick:function(){n(Ee.name,{product:"Assistant",cta:"Skip",where:Wn,universitySlug:o}),r()},disabled:a},"Skip"),m.createElement(y.b7j,{color:"primary",block:!0,size:"sm",disabled:""===i.email||!i.privacyChecked},"Submit")))}))}function Hn(e){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(e)}function Jn(){Jn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Hn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Hn(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Yn(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var Vn="Conversation Feedback Collection Popup",Zn=(0,X.default)(y.azJ)(Bn||(Bn=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    span * {\n        font-size: 0.875rem;\n    }\n"]))),Kn=function(e){var t=e.handleSubmit,r=e.handleDismiss,n=(0,S.st)().trackEvent,o=Y().universitySlug;return m.createElement(y.lVW,{initialValues:{freeText:""},validationSchema:{freeText:Rn.string().max(250,"Please provide at most 250 characters").min(6,"Please provide at least 6 characters").required("Please provide your feedback or skip")},onSubmit:function(){var e,r=(e=Jn().mark((function e(r,i){var a;return Jn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=i.setSubmitting)(!0),n(Ae.name,{product:"Assistant",cta:"Submit",where:Vn,universitySlug:o}),e.prev=3,e.next=6,t(r.freeText);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error(e.t0),a(!1);case 12:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Yn(i,n,o,a,l,"next",e)}function l(e){Yn(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()},(function(e){var t,i=e.values,a=e.isSubmitting;return m.createElement(y.azJ,{paddingTop:"xsmall",w:"100%"},m.createElement(Zn,{paddingBottom:"small"},m.createElement(y.gE_,{required:!0,name:"freeText",label:"We'd love to know why",helpTop:m.createElement(y.azJ,{paddingY:"small"},m.createElement(y.EYj,{size:"small"},"Please explain why you gave your rating below"))},m.createElement(y.ksK,{required:!0,value:null!==(t=i.freeText)&&void 0!==t?t:"",characterLimit:250,name:"freeText"}))),m.createElement(y.azJ,{gap:"small",display:"flex"},m.createElement(y.$nd,{color:"default",ghost:!0,block:!0,size:"sm",onClick:function(){n(ke.name,{product:"Assistant",cta:"Skip",where:Vn,universitySlug:o}),r()},disabled:a},"Skip"),m.createElement(y.b7j,{color:"primary",block:!0,size:"sm",disabled:0===i.freeText.length},"Submit")))}))};function Xn(e){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xn(e)}function Qn(){Qn=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Xn(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Xn(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function eo(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var to="Conversation Rating Collection Popup",ro=function(e){var t=e.handleSubmit,r=e.handleDismiss,n=(0,S.st)().trackEvent,o=Y().universitySlug;return(0,m.useEffect)((function(){n(xe.name,{product:"Assistant",universitySlug:o})}),[]),m.createElement(y.lVW,{initialValues:{rating:void 0},validationSchema:{rating:Rn.string().required("Please select a rating")},onSubmit:function(){var e,r=(e=Qn().mark((function e(r,i){var a;return Qn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=i.setSubmitting)(!0),n(je.name,{product:"Assistant",conversationRating:r.rating,cta:"Submit",where:to,universitySlug:o}),e.prev=3,e.next=6,t(r.rating);case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error(e.t0),a(!1);case 12:case"end":return e.stop()}}),e,null,[[3,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){eo(i,n,o,a,l,"next",e)}function l(e){eo(i,n,o,a,l,"throw",e)}a(void 0)}))});return function(e,t){return r.apply(this,arguments)}}()},(function(e){var t=e.values,i=e.isSubmitting;return m.createElement(y.BJc,{space:"small-medium"},m.createElement(y.gE_,{label:"How helpful was this conversation?"},m.createElement(y.GWJ,{name:"rating",min:1,max:5,minText:"Not very helpful",maxText:"Extremely helpful"})),m.createElement(y.azJ,{gap:"small",display:"flex"},m.createElement(y.$nd,{color:"default",ghost:!0,block:!0,size:"sm",onClick:function(){n(Oe.name,{product:"Assistant",cta:"Continue chatting",where:to,universitySlug:o}),r()},disabled:i},"Continue chatting"),m.createElement(y.b7j,{color:"primary",block:!0,size:"sm",disabled:void 0===t.rating},"Submit")))}))},no=function(){return m.createElement(y.BJc,{space:"large"},m.createElement(y.DZT,{size:"small",level:"2",align:"center"},"Thanks!"),m.createElement(y.EYj,{align:"center"},"Your input helps the Assistant improve for future students"))};function oo(e){return oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oo(e)}function io(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ao(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?io(Object(r),!0).forEach((function(t){lo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):io(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function lo(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=oo(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=oo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oo(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function co(){co=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==oo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(oo(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function uo(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}function so(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){uo(i,n,o,a,l,"next",e)}function l(e){uo(i,n,o,a,l,"throw",e)}a(void 0)}))}}function fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ho(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ho(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ho(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var mo=function(e){return e[e.LEAD_EMAIL=0]="LEAD_EMAIL",e[e.FEEDBACK_RATING=1]="FEEDBACK_RATING",e[e.FEEDBACK_TEXT=2]="FEEDBACK_TEXT",e[e.THANK_YOU=3]="THANK_YOU",e}(mo||{});function po(e,t){return"ASSISTANT_CONVERSATION_POPUP_DISMISSED_".concat(e,"_").concat(t)}function yo(){var e=(0,gt.m)(),t=(0,E.useErrorReporting)().reportError,r=Y().universityId,n=de(),o=n.conversationId,i=n.feedback,a=n.leadGenerated,l=n.token,c=(0,at.Mh)(Tn,_n),u=(0,at.Mh)(Ln,Pn),s=fo((0,m.useState)((function(){return c&&!a?mo.LEAD_EMAIL:u&&!i?mo.FEEDBACK_RATING:null})),2),f=s[0],h=s[1],d=fo((0,m.useState)((function(){if(!o)return!1;var e=po(r,o);return"true"===window.sessionStorage.getItem(e)})),2),p=d[0],v=d[1],g=function(e){var t=C(C({},T),e);return j.n(W,t)}(),b=fo(g,1)[0],w=fo((0,m.useState)(!!i),2),S=w[0],x=w[1],O=fo((0,m.useState)(null),2),k=O[0],A=O[1],I=function(e){var t=C(C({},T),e);return j.n($,t)}(),L=fo(I,1)[0],P=m.useCallback(function(){var e=so(co().mark((function e(n,i){var a;return co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:return a={conversationId:o,universityId:r,email:n,ubConsent:i,token:l},e.prev=3,e.next=6,b({variables:a});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.error("Failed to submit email lead, try again later",e.t0),t(new Error("Failed to submit email lead, try again later"+ae(e.t0)));case 12:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,r){return e.apply(this,arguments)}}(),[o,t,b,r,l]),_=(0,m.useCallback)(function(){var n=so(co().mark((function n(i){var a,c,u,s;return co().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o){n.next=2;break}return n.abrupt("return");case 2:return a=ao({conversationId:o,universityId:r,token:l},i),n.prev=3,n.next=6,L({variables:a});case 6:null!=(u=n.sent)&&null!==(c=u.data)&&void 0!==c&&c.saveAssistantConversationFeedback.rating&&null!=(s=e.readQuery({query:R,variables:{id:o,universityId:r,token:l}}))&&s.getAssistantConversation&&e.writeQuery({query:R,variables:{id:o,universityId:r,token:l},data:ao(ao({},s),{},{getAssistantConversation:ao(ao({},s.getAssistantConversation),{},{feedback:{rating:a.rating}})})}),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(3),console.error("Failed to submit conversation feedback, try again later",n.t0),t(new Error("Failed to submit conversation feedback, try again later"+n.t0));case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}(),[e,o,t,r,l]),N=function(){if(o){var e=po(r,o);window.sessionStorage.setItem(e,"true"),v(!0)}},D=m.useCallback(function(){var e=so(co().mark((function e(t,r){var n;return co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u&&!S,e.next=3,P(t,r);case 3:n?h(mo.FEEDBACK_RATING):(h(mo.THANK_YOU),setTimeout((function(){v(!0)}),5e3));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),[P,S,u]),M=(0,m.useCallback)(function(){var e=so(co().mark((function e(t){return co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(t),e.next=3,_({rating:t});case 3:h(mo.FEEDBACK_TEXT);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[_]),q=(0,m.useCallback)(function(){var e=so(co().mark((function e(t){return co().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,_({text:t,rating:k});case 4:h(mo.THANK_YOU),setTimeout((function(){x(!0),v(!0)}),5e3);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[k,_]);if(!o)return null;if(p)return null;switch(f){case mo.LEAD_EMAIL:return m.createElement(zn,null,m.createElement($n,{handleSubmit:D,handleDismiss:function(){u&&!S?h(mo.FEEDBACK_RATING):(h(null),v(!0))}}));case mo.FEEDBACK_RATING:return m.createElement(zn,null,m.createElement(ro,{handleSubmit:M,handleDismiss:N}));case mo.FEEDBACK_TEXT:return m.createElement(zn,null,m.createElement(Kn,{handleSubmit:q,handleDismiss:N}));case mo.THANK_YOU:return m.createElement(y.azJ,{padding:"medium",bgColor:"white",borderBottomWidth:1,borderColor:"grey100"},m.createElement(no,null));default:return null}}function vo(e){var t=e.count,r=t<=Ht?"grey600":"red800";return m.createElement(y.azJ,{marginTop:"small",marginRight:"xlarge",marginBottom:"xxsmall"},m.createElement(y.EYj,{size:"xsmall",color:r,align:"end"},t," / ",Ht))}function go(e){var t=e.title,r=e.message;return m.createElement(y.azJ,{bgColor:"red100",color:"red800",padding:"medium",borderRadius:"xxsmall",margin:"small",marginBottom:"none"},m.createElement(y.BJc,{space:"small"},m.createElement(y.azJ,{display:"flex",alignItems:"center",gap:"xsmall"},m.createElement(Sr,{width:"24px",height:"24px"}),m.createElement(y.DZT,{size:"xxsmall",level:"3",color:"red800"},t)),m.createElement(y.EYj,{size:"small",color:"red800"},r)))}function bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return wo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Eo=(0,m.memo)((function(e){var t,r=e.messages,n=e.showAssistantTyping;return m.createElement(m.Fragment,null,r.map((function(e,t,r){return m.createElement(nn,{key:e.id,message:e,index:t,array:r})})),(null===(t=r.at(-1))||void 0===t?void 0:t.sender)!==D.Assistant&&n&&m.createElement(hn,{key:r.length+1}))}));function So(){var e=de(),t=e.loading,r=e.userHasSentMessage,n=Ke(),o=n.isSmallDeviceDimension,i=n.isSmallInnerHeight,a=(0,m.useRef)(null),l=(0,m.useRef)(null),c=(0,S.st)().trackEvent,u=Y().universitySlug,s=fr(),f=s.onSendMessage,h=s.conversationState,d=s.messages,p=s.error,v=(0,at.Mh)(kn,An),g=(0,at.Mh)(Mn,qn),b=bo((0,m.useState)(""),2),w=b[0],E=b[1],x=(0,m.useRef)(""),O="Please keep the message within ".concat(Ht," characters."),j=t||h!==ur.USER_CAN_SEND_MESSAGE,k=(0,m.useRef)(j),A=d.length>4,I=w.length>Ht&&g,C=h===ur.ASSISTANT_PROCESSING_RESPONSE,L=(0,m.useMemo)((function(){var e=d.map((function(e){return{id:e.id}}));return C&&e.push({id:"typing"}),e}),[C,d]),P=function(e){E((function(t){return x.current=t,e}))};return(0,m.useEffect)((function(){var e;k.current&&!j&&(null===(e=a.current)||void 0===e||e.focus());k.current=j}),[j]),(0,m.useEffect)((function(){var e=function(e){var t;"chatVisible=true"===e.data&&(L.length<2&&!o&&(null===(t=l.current)||void 0===t||t.focus()))};return window.addEventListener("message",e,!0),function(){window.removeEventListener("message",e)}}),[L.length,o]),p?m.createElement(y.Ss2,{h:"100%",w:"100%",bgColor:"grey50"},m.createElement(y.EYj,null,"Assistant Error")):m.createElement(pe.cW,{backgroundColor:"grey50"},A&&m.createElement(yo,null),m.createElement(pe.ou,{blur:!1,loading:!1,hasMoreMessages:!1,messages:L},m.createElement(y.azJ,{marginY:"small-medium",role:"listitem"},m.createElement(y.EYj,{size:"xsmall",color:"grey600",align:"center"},"The Assistant can make mistakes. Verify important information.")),m.createElement(Eo,{messages:d,showAssistantTyping:C}),!r&&v&&i&&m.createElement(En,null)),!r&&v&&!i&&m.createElement(En,null),I&&m.createElement(go,{title:"Character limit reached",message:O}),m.createElement(et,null,m.createElement(pe.VA,{ref:a,value:w,onSend:function(e){f(e).catch((function(){return P(x.current)})),c(Le.name,{product:"Assistant",cta:"Send Message",universitySlug:u})},disabled:j,onChangeText:P}),g&&m.createElement(vo,{count:w.length})))}Eo.displayName="Messages";var xo=r(4229);function Oo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ko=(0,m.createContext)({isMobileMenuOpen:!1,setIsMobileMenuOpen:function(){}});function Ao(){return(0,m.useContext)(ko)}var Io,Co=function(e){var t=e.children,r=Oo((0,m.useState)(!1),2),n=r[0],o=r[1],i=Ke().isSmallDeviceDimension;(0,m.useEffect)((function(){i||o(!1)}),[i]);var a=(0,m.useMemo)((function(){return{isMobileMenuOpen:n,setIsMobileMenuOpen:o}}),[n]);return m.createElement(ko.Provider,{value:a},t)};function Lo(e){return Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lo(e)}function Po(){Po=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Lo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Lo(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function To(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var _o,No=(0,X.default)(y.$nd)(Io||(Io=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    justify-content: flex-start;\n"])));function Do(e){var t=e.handleCloseClicked,r=e.isConnectButtonDisabled,n=fr().onSendMessage,o=Ao().setIsMobileMenuOpen;function i(){var e;return e=Po().mark((function e(){return Po().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n("Connect me to the right person");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error("Could not send connect me message");case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),i=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){To(i,n,o,a,l,"next",e)}function l(e){To(i,n,o,a,l,"throw",e)}a(void 0)}))},i.apply(this,arguments)}return m.createElement(y.azJ,{display:"flex",gap:"small"},m.createElement(y.Ss2,{padding:"small",gap:"small",alignItems:"flex-start",width:"100%",flexGrow:1},m.createElement(No,{clear:!0,block:!0,onClick:function(){o(!1),function(){i.apply(this,arguments)}()},disabled:r},m.createElement(xo.GvQ,null),"Connect me"),m.createElement(No,{clear:!0,block:!0,onClick:function(){o(!1),t()}},m.createElement(xo.lGH,null),"Close chat window")))}function Mo(e){return Mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mo(e)}function qo(){qo=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),l=new L(n||[]);return o(a,"_invoke",{value:k(e,r,l)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(P([])));S&&S!==r&&n.call(S,a)&&(w=S);var x=b.prototype=v.prototype=Object.create(w);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function r(o,i,a,l){var c=f(e[o],e,i);if("throw"!==c.type){var u=c.arg,s=u.value;return s&&"object"==Mo(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,l)}),(function(e){r("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=h;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var l=n.delegate;if(l){var c=A(l,n);if(c){if(c===y)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?p:d,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=p,n.method="throw",n.arg=u.arg)}}}function A(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,y;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function P(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(Mo(t)+" is not iterable")}return g.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,c,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},O(j.prototype),u(j.prototype,l,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new j(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(x),u(x,c,"Generator"),u(x,a,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return l.type="throw",l.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:P(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function zo(e,t,r,n,o,i,a){try{var l=e[i](a),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,o)}var Ro,Go,Fo,Uo,Bo=(0,X.default)(y.EYj)(_o||(_o=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n    letter-spacing: 2px;\n"])));function Wo(e){var t=e.handleCloseClicked,r=(0,y.TT0)(),n=(0,S.st)().trackEvent,o=Y().universitySlug,i=Ke(),a=i.isSmallDeviceDimension,l=i.isSmallInnerHeight,c=Ao(),u=c.isMobileMenuOpen,s=c.setIsMobileMenuOpen,f=(0,at.Mh)(On,jn),h=(0,m.useRef)(null),d=(0,m.useRef)(null),p=de().loading,v=fr(),g=v.onSendMessage,b=v.conversationState,w=p||b!==ur.USER_CAN_SEND_MESSAGE;function E(){var e;return e=qo().mark((function e(){return qo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("Connect me to the right person");case 3:n(be.name,{product:"Assistant",cta:"Connect me",universitySlug:o}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Could not send connect me message",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})),E=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){zo(i,n,o,a,l,"next",e)}function l(e){zo(i,n,o,a,l,"throw",e)}a(void 0)}))},E.apply(this,arguments)}return(0,m.useEffect)((function(){var e=function(e){var t,r;"chatVisible=true"===e.data&&(a?null===(t=h.current)||void 0===t||t.focus():null===(r=d.current)||void 0===r||r.focus())};return window.addEventListener("message",e,!0),function(){window.removeEventListener("message",e)}}),[a,f]),m.createElement(m.Fragment,null,m.createElement(y.lGe,{isOpen:u,onDismiss:function(){return s(!u)},CloseButton:null},m.createElement(Do,{handleCloseClicked:t,isConnectButtonDisabled:w})),m.createElement(y.azJ,{padding:a?"small-medium":"medium-large",display:"flex",justifyContent:"space-between",alignItems:"center",w:"100%",minW:"100%"},m.createElement(y.BJc,{space:a?"small":"small-medium"},m.createElement(y.cVF,{verticalAlign:"center",space:"xsmall"},m.createElement(y.DZT,{id:"assistant-heading",level:"2",size:"xsmall",color:r.colors.primaryColor},"Assistant"),f&&m.createElement(y.azJ,{borderRadius:"xxsmall",bgColor:"blue100",padding:"xsmall"},m.createElement(Bo,{size:"small",weight:"bold",color:"blue800"},"BETA"))),!l&&m.createElement(y.azJ,{display:"flex",gap:"xsmall",justifyContent:"flex-start",alignItems:"center"},m.createElement(y.azJ,{borderRadius:"full",bgColor:"green700",w:"14px",h:"14px"}),m.createElement(y.EYj,null,"Online 24/7"))),a?m.createElement(y.$nd,{iconOnly:!0,round:!0,clear:!0,size:"sm",color:"light",onClick:function(){return s(!u)},"aria-label":"Open menu",ref:h},m.createElement(xo.ViA,null)):m.createElement(y.lV1,{color:"primary",size:"md",ghost:!0,onClick:function(){return function(){return E.apply(this,arguments)}()},disabled:w,ref:d},m.createElement(y.azJ,{display:"flex",gap:"xsmall",alignItems:"center"},m.createElement(y.EYj,{weight:"bold",color:r.colors.primaryColor},"Connect me"),m.createElement(y.azJ,{display:"block"},m.createElement(xo.GvQ,{color:r.colors.primaryColor,style:{margin:0}}))))))}function $o(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Ho=X.default.span(Ro||(Ro=$o(['\n    display: block;\n\n    &:before {\n        content: "";\n        margin-bottom: -0.374em;\n        display: table;\n    }\n    &:after {\n        content: "";\n        margin-top: -0.421em;\n        display: table;\n    }\n']))),Jo=(0,X.default)(Ho)(Go||(Go=$o(["\n    font-size: ",";\n    line-height: ",";\n    height: 11.289px;\n    font-weight: 400;\n    margin-bottom: ",";\n"])),(function(e){return e.$isSmallDeviceDimension?"0.875rem":"1rem"}),(function(e){return e.$isSmallDeviceDimension?"21px":"24px"}),(function(e){return e.$isSmallDeviceDimension?"0.875rem":"1rem"})),Yo=(0,X.default)(Ho)(Fo||(Fo=$o(["\n    font-size: ",";\n    line-height: ",";\n    height: 22.57px;\n    font-weight: 700;\n"])),(function(e){return e.$isSmallDeviceDimension?"1.5rem":"2rem"}),(function(e){return e.$isSmallDeviceDimension?"36px":"48px"})),Vo=(0,X.default)(y.azJ)(Uo||(Uo=$o(["\n    overflow: hidden;\n    width: 64px;\n    height: 64px;\n    border: 5px solid white;\n    border-radius: 64px;\n    object-fit: cover;\n    &:not(:first-child) {\n        margin-left: -20px;\n    }\n"])));function Zo(){var e,t=function(e){var t=C(C({},T),e);return k.IT(G,t)}({variables:{universityId:Y().universityId,count:3}}),r=t.data,n=t.loading,o=t.error;return n?m.createElement(y.Ss2,{flexDirection:"row"},m.createElement(Vo,{bgColor:"grey100"}),m.createElement(Vo,{bgColor:"grey100"}),m.createElement(Vo,{bgColor:"grey100"}),m.createElement(y.s6o,null,"Loading avatars")):o||null==r||!r.getRandomAmbassadors?null:m.createElement(y.BJc,{space:"small-medium",align:"center"},3===(null==r||null===(e=r.getRandomAmbassadors)||void 0===e?void 0:e.length)&&m.createElement(y.Ss2,{flexDirection:"row"},r.getRandomAmbassadors.map((function(e){return m.createElement(Vo,{as:"img",src:e.profilePhoto,alt:e.firstName?"".concat(e.firstName," profile photo"):"Profile photo",key:e.profilePhoto})}))))}function Ko(e){var t=e.handleCloseClicked,r=Ke(),n=r.isSmallDeviceDimension,o=r.isSmallInnerHeight,i=(0,m.useRef)(null),a=n?o?"small":"medium-large":"large";return(0,m.useEffect)((function(){var e=function(e){var t;"chatVisible=true"===e.data&&(n&&(null===(t=i.current)||void 0===t||t.focus()))};return window.addEventListener("message",e,!0),function(){window.removeEventListener("message",e)}}),[n]),m.createElement(y.azJ,{position:"relative"},m.createElement(y.azJ,{position:"absolute",display:n?"block":"none",top:12,right:12},m.createElement(y.$nd,{iconOnly:!0,round:!0,clear:!0,size:"sm",color:"light",onClick:t,"aria-label":"Close assistant",ref:i},m.createElement(y.Int,{icon:Pr,size:"medium"}))),m.createElement(y.Ss2,{id:"assistant-heading",h:"fit-content",minH:"fit-content",w:"100%",minW:"100%",padding:a,alignItems:"center",gap:"small-medium"},m.createElement("h2",{style:{textAlign:"center",margin:0}},m.createElement(Jo,{$isSmallDeviceDimension:n},"Welcome to"),m.createElement(Yo,{$isSmallDeviceDimension:n},"Your Assistant")),!o&&m.createElement(Zo,null)))}function Xo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qo(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qo(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ei(){var e=Be().postMessage,t=de().userHasSentMessage,r=Xo((0,m.useState)(0),2),n=r[0],o=r[1],i=Xo((0,m.useState)(!1),2),a=i[0],l=i[1],c=(0,m.useRef)(null),u=function(e){var t=(0,m.useRef)(null);return(0,m.useLayoutEffect)((function(){var r=null==t?void 0:t.current;if(r){var n=new ResizeObserver((function(t){e(r,t[0])}));return n.observe(r),function(){n.disconnect()}}}),[e,t]),t}((0,m.useCallback)((function(e){o(e.offsetHeight)}),[])),s=(0,m.useCallback)((function(){e("chatVisible=false")}),[e]);return(0,m.useEffect)((function(){!1===c.current&&!0===t&&l(!0),c.current=t}),[t]),m.createElement(y.azJ,{height:"".concat(n,"px"),minH:"".concat(n,"px"),maxH:"".concat(n,"px"),overflow:"hidden",backgroundColor:"white",borderColor:"grey100",borderBottomWidth:1,transition:a?"all 0.2s ease-in-out":"none"},m.createElement(y.azJ,{ref:u,h:"fit-content"},t?m.createElement(Wo,{handleCloseClicked:s}):m.createElement(Ko,{handleCloseClicked:s})))}function ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ri(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ri(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ni(e){var t=e.children,r=(0,at.Mh)(In,Cn),n=ti((0,m.useState)(window.innerWidth<700),2),o=n[0],i=n[1],a=Y().universityName;return(0,m.useEffect)((function(){var e=function(){i(window.innerWidth<700)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),window.self!==window.top||o?t:m.createElement(y.Ss2,{height:"100%",maxW:"100%",justifyContent:"center",alignItems:"center",bgColor:"white",padding:"small"},m.createElement(y.BJc,{space:["small","large"]},m.createElement(y.DZT,{level:"1",align:"center"},"Unibuddy Assistant"),m.createElement(y.azJ,{display:"flex",flexDirection:"row",gap:"large"},m.createElement(y.Ss2,{flexShrink:0,minW:"320px",maxW:"450px",minH:"85vh",maxH:"85vh",borderWidth:1,borderColor:"grey150",borderRadius:"small",overflow:"hidden"},t),r&&m.createElement(y.Ss2,{maxW:"450px",alignItems:"flex-start"},m.createElement(y.BJc,{space:"medium-large"},m.createElement(y.azJ,{bgColor:"grey50",borderRadius:"small",padding:"small-medium",borderWidth:1,borderColor:"grey100"},m.createElement(y.BJc,{space:"small-medium"},m.createElement(y.EYj,{weight:"bold"},"Information"),m.createElement(y.EYj,null,"This is an experimental feature - ask the assistant any\n                                        questions you have about ".concat(a||"the institution",", and let us know\n                                        what you think of the responses. The assistant can make\n                                        mistakes, so consider checking important information.")))),m.createElement(y.vxq,{external:!0,target:"_blank",rel:"noopener noreferrer",color:"primary",block:!0,to:"https://tally.so/r/wQ7Dzg"},"Give feedback >"))))))}function oi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ii(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ii(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ii(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ai=function(){var e=function(e){var t=C(C({},T),e);return j.n(B,t)}(),t=oi(e,1)[0];return{markConversationAsViewed:function(e){var r=e.conversationId,n=e.universityId,o=e.token,i="ASSISTANT_".concat(n,"_").concat(r);localStorage.getItem(i)||(t({variables:{conversationId:r,universityId:n,token:o}}),localStorage.setItem(i,"true"))}}};function li(){var e=Y().universityId,t=de(),r=t.loading,n=t.conversationId,o=t.token,i=ai().markConversationAsViewed;return(0,m.useEffect)((function(){n&&e&&i({conversationId:n,universityId:e,token:o})}),[n,i,e,o]),m.createElement(ni,null,m.createElement(pe.h6,{theme:ot},m.createElement(ei,null),r?m.createElement(it,null):m.createElement(So,null)))}function ci(e){var t=e.children,r=Be().postMessage,n=Ao().isMobileMenuOpen;return(0,m.useEffect)((function(){function e(e){if("Escape"!==e.key){if(e.shiftKey||"Tab"===e.key){var t=document.querySelectorAll("button, a, input, select, textarea, [tabindex]"),o=Array.from(t).filter((function(e){return"-1"!==e.getAttribute("tabindex")}));if(!o||0!==o.length){var i=o[0],a=o[o.length-1],l=document.activeElement===i,c=document.activeElement===a;e.shiftKey&&"Tab"===e.key&&c||(e.shiftKey&&"Tab"===e.key&&l&&(e.preventDefault(),a.focus()),!e.shiftKey&&"Tab"===e.key&&c&&(e.preventDefault(),i.focus()))}}}else{if(n)return;r("chatVisible=false")}}return window.addEventListener("keydown",e,!0),function(){window.removeEventListener("keydown",e,!0)}}),[r,n]),m.createElement(m.Fragment,null,t)}var ui,si,fi,hi,di,mi=function(e){var t=e.children,r=Ke().isSmallDeviceDimension;return m.createElement(ci,null,m.createElement(y.Ss2,{borderRadius:r?"none":"small",alignItems:"center",justifyContent:"center"},m.createElement(y.Ss2,{overflow:"hidden",borderRadius:"small",width:"100%",height:"100vh"},t)))};function pi(){return(0,m.useEffect)((function(){var e=function(e){"showCTAActionsAria=true"===e.data&&setTimeout((function(){var e=document.getElementById("announcement-area");e&&(e.textContent="Unibuddy Assistant is here to help! Find us at the end of the page.")}),150)};return window.addEventListener("message",e,!0),function(){window.removeEventListener("message",e)}}),[]),m.createElement(y.s6o,{role:"status",id:"announcement-area"})}function yi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return vi(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vi(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gi(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var bi="ASSISTANT_SHOULD_SHOW_ACTIONS",wi=(0,X.keyframes)(ui||(ui=gi(["\n    0% {\n       max-height: 100vmax;\n    }\n    100% {\n       transform: scale(1);\n       max-height: 100vmax;\n       overflow: visible;\n       padding-top: 16px;\n    }\n"]))),Ei=(0,X.default)(y.azJ)(si||(si=gi(["\n    box-sizing: border-box;\n"]))),Si=(0,X.default)(y.azJ)(fi||(fi=gi(["\n    transform: scale(0);\n    text-align: right;\n    align-self: flex-end;\n    transform-origin: 100% 100%;\n    animation: "," 0.15s ease-out 0s forwards;\n    animation-delay: 0s;\n"])),wi),xi=(0,X.default)(Si)(hi||(hi=gi(["\n    animation-delay: 3s;\n"]))),Oi=(0,X.default)(y.azJ)(di||(di=gi(["\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);\n    &:hover {\n        cursor: pointer;\n    }\n"])));function ji(){var e,t=(0,y.TT0)(),r=Ke(),n=r.isSmallDeviceDimension,o=r.isSmallInnerHeight,i=(0,at.Mh)(Nn,Dn),a=null!==(e=new URLSearchParams(window.location.search).get("universityId"))&&void 0!==e?e:"",l=Be().postMessage,c=yi((0,y.Mjh)("".concat(bi,"-").concat(a),!0),2),u=c[0],s=c[1];(0,m.useEffect)((function(){var e=function(e){"showCTAActions=false"===e.data&&s(!1)};return window.addEventListener("message",e,!0),function(){window.removeEventListener("message",e)}}),[s]),(0,m.useEffect)((function(){if(u){var e=setTimeout((function(){l("showCTAActions=true")}),6e3);return function(){return clearTimeout(e)}}}),[u,l]),(0,m.useEffect)((function(){if(o)l("showCTAActions=false");else if(n){l("showCTAActions=".concat(!i&&u?"true":"false"))}}),[n,i,u,l,o]);var f=(0,m.useCallback)((function(){s(!1),l("showCTAActions=false")}),[s,l]),h=(0,m.useCallback)((function(){f(),l("chatVisible=true")}),[f,l]);if(!u)return null;if(n&&i||o&&i)return null;var d=function(e){"Enter"!==e.key&&" "!==e.key||h()};return m.createElement(Ei,{display:"flex",flexDirection:"column-reverse",height:"250px",position:"relative",overflow:"hidden"},m.createElement(pi,null),m.createElement(y.Ss2,{padding:"medium-large"},m.createElement(Si,{display:"flex",flexDirection:"row-reverse",alignItems:"flex-end",maxH:"0",overflow:"hidden"},m.createElement(y.azJ,null,m.createElement(Oi,{position:"absolute",top:"-24px",right:"0",borderRadius:"full"},m.createElement(y.$nd,{iconOnly:!0,round:!0,size:"sm",color:"primary",onClick:f,"aria-label":"Close actions"},m.createElement(y.Int,{icon:Pr,size:"small"})))),m.createElement(Oi,{role:"button",padding:"small-medium",borderRadius:"xsmall",onClick:h,_hover:{bgColor:"grey100"},bgColor:"white",flex:"0 1 auto",tabIndex:"0",onKeyDown:d},m.createElement(y.EYj,{weight:"bold"},"Hi there! 👋 Looking for something?"))),m.createElement(xi,{display:"flex",flexDirection:"row-reverse",alignItems:"flex-end",maxH:"0",overflow:"hidden"},m.createElement(Oi,{role:"button",padding:"small-medium",borderRadius:"xsmall",onClick:h,bgColor:"grey50",_hover:{bgColor:t.colors.primaryColor,color:"white"},flex:"0 1 auto",tabIndex:"0",onKeyDown:d},m.createElement(y.EYj,{color:"inherit"},m.createElement(y.YhG,{weight:"bold",color:"inherit"},"Direct me")," ","to the right information ℹ️"))),m.createElement(xi,{display:"flex",flexDirection:"row-reverse",alignItems:"flex-end",maxH:"0",overflow:"hidden"},m.createElement(Oi,{role:"button",padding:"small-medium",borderRadius:"xsmall",onClick:h,bgColor:"grey50",_hover:{bgColor:t.colors.primaryColor,color:"white"},flex:"0 1 auto",tabIndex:"0",onKeyDown:d},m.createElement(y.EYj,{color:"currentColor"},m.createElement(y.YhG,{weight:"bold",color:"currentColor"},"Connect me")," ","to the right person 👩‍🎓")))))}var ki=["color"];function Ai(){return Ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ai.apply(null,arguments)}var Ii,Ci,Li,Pi=function(e){var t=e.color,r=void 0===t?"currentColor":t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],-1===t.indexOf(r)&&{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,ki);return m.createElement("svg",Ai({xmlns:"http://www.w3.org/2000/svg",width:44,height:40,fill:"none",viewBox:"0 0 44 40"},n),m.createElement("path",{fill:r,d:"M24.445 0v19.262l9.25-.809c.535 6.1-3.49 11.547-9.25 12.979v7.68C35.246 39.111 44 30.354 44 19.555V0H24.445Zm7.333 14.645a2.443 2.443 0 1 1 0-4.889 2.443 2.443 0 1 1 0 4.889Zm-22.54 5.946 10.319-.903V0H0v19.555c0 10.8 8.756 19.554 19.555 19.554v-7.46C14.11 30.797 9.737 26.33 9.237 20.59Zm3.01-10.835a2.444 2.444 0 1 1 0 4.889 2.444 2.444 0 1 1 0-4.889Z"}))};function Ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _i(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ni(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var Di=X.default.button(Ii||(Ii=Ni(["\n    all: unset;\n    cursor: pointer;\n    padding: 8px;\n    width: 32px;\n    height: 32px;\n    border-radius: 40px;\n    float: right;\n    position: relative;\n    color: white;\n    background-color: ",";\n    transition: ",";\n    -webkit-transition: ",";\n    overflow: hidden;\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    align-items: center;\n    gap: 12px;\n\n    :focus {\n        outline: ",";\n    }\n\n    ",";\n"])),(function(e){return e.theme.colors.primaryColor}),(function(e){return e.appVisible?"width 0.3s ease, background-color 0.1s ease":"all 0.3s ease"}),(function(e){return e.appVisible?"width 0.3s ease, background-color 0.1s ease":"all 0.3s ease"}),(function(e){var t=e.theme;return"2px solid ".concat(t.colors.blue400)}),(function(e){var t=e.theme;return e.appVisible?(0,X.css)(Ci||(Ci=Ni(["\n                  &:hover {\n                      background-color: ",";\n                  }\n              "])),t.colors.primaryHoverColor):(0,X.css)(Li||(Li=Ni(["\n                  &:hover {\n                      width: 150px;\n                      gap: 8px;\n                      background-color: ",";\n                  }\n              "])),t.colors.primaryHoverColor)}));function Mi(){var e,t=null!==(e=new URLSearchParams(window.location.search).get("universityId"))&&void 0!==e?e:"",r=Be().postMessage,n=(0,m.useRef)(null),o=Ti((0,m.useState)(!1),2),i=o[0],a=o[1],l=Ti((0,y.Mjh)("".concat(bi,"-").concat(t)),2),c=(l[0],l[1]);return(0,m.useEffect)((function(){var e=function(e){var t;switch(e.data){case"chatVisible=true":a(!0);break;case"chatVisible=false":a(!1),null===(t=n.current)||void 0===t||t.focus()}};return window.addEventListener("message",e,!0),function(){window.removeEventListener("message",e)}}),[]),m.createElement(Di,{title:"".concat(i?"Close":"Open"," Assistant"),"aria-label":"".concat(i?"Close":"Open"," Assistant"),"aria-expanded":i,"aria-haspopup":"dialog",appVisible:i,onClick:function(){r("chatVisible=".concat(!i)),r("showCTAActions=false"),c(!1),a(!i)},ref:n},i?m.createElement(Ir,{color:"white",width:"32px",height:"32px"}):m.createElement(m.Fragment,null,m.createElement(y.azJ,{display:"flex",flexShrink:0,height:"32px",width:"32px",justifyContent:"center",paddingTop:"xxsmall"},m.createElement(Pi,{color:"white",width:"30px",height:"28px"})),m.createElement(y.azJ,{display:"flex",flexShrink:0},m.createElement(y.EYj,{color:"white",nowrap:!0,weight:"bold"},"Open chat")),m.createElement(y.azJ,{display:"flex",flexShrink:0},m.createElement(jr,{color:"white",width:"24px",height:"24px"}))))}function qi(e){return(r.g?r.g.window:window).env[e]}function zi(e){var t=e.children,r=Ge().chatVisible,n=Y().universityId,o="true"===window.sessionStorage.getItem(Fe(n));return window.self===window.top||r||o?m.createElement(vt.FI,{token:"test-token",socketCredentials:{PUSHER_APP_KEY:qi("PUSHER_APP_KEY"),PUSHER_APP_CLUSTER:qi("PUSHER_APP_CLUSTER"),PUSHER_AUTH_URL:qi("PUSHER_AUTH_URL")}},t):t}function Ri(){var e=(0,E.useErrorReporting)().reportError,t=new URLSearchParams(window.location.search).get("render");switch(t){case"cta":return m.createElement(E.ErrorBoundary,{fallback:null},m.createElement(Mi,null));case"ctaActions":return m.createElement(Qe,null,m.createElement(E.ErrorBoundary,{fallback:null},m.createElement(ji,null)));case"chat":return m.createElement(Qe,null,m.createElement(E.ErrorBoundary,{fallback:m.createElement(y.EYj,{size:"medium",align:"center"},"Could not load Unibuddy Assistant. Please try again later.")},m.createElement(zi,null,m.createElement(Co,null,m.createElement(mi,null,m.createElement(me,null,m.createElement(hr,null,m.createElement(li,null))))))));default:return e(new Error("Invalid render: '".concat(null!=t?t:"null","'"))),null}}r(9027);var Gi=r(5072),Fi=r.n(Gi),Ui=r(7825),Bi=r.n(Ui),Wi=r(7659),$i=r.n(Wi),Hi=r(5056),Ji=r.n(Hi),Yi=r(540),Vi=r.n(Yi),Zi=r(1113),Ki=r.n(Zi),Xi=r(3743),Qi={};Qi.styleTagTransform=Ki(),Qi.setAttributes=Ji(),Qi.insert=$i().bind(null,"head"),Qi.domAPI=Bi(),Qi.insertStyleElement=Vi();Fi()(Xi.A,Qi);Xi.A&&Xi.A.locals&&Xi.A.locals;var ea=r(3075),ta=r(5774),ra=r(347),na=r(1765),oa=r(4366),ia=r(3829),aa=r(2070),la=r(8955);function ca(e){return ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ca(e)}function ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(r),!0).forEach((function(t){fa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=ca(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=ca(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ca(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}window,window.parent;var ha=function(e,t){if(t.body instanceof FormData)return fetch(e,t);var r=JSON.parse(t.body).operationName,n=["opname=".concat(encodeURIComponent(r))].join("&");return fetch("".concat(e,"?").concat(n),t)};function da(e){var t,r=qi("GATEWAY_URL"),n=null!==(t=qi("VERSION"))&&void 0!==t?t:"unknown",o=(0,m.useMemo)((function(){var t=(0,ea.$)({uri:"".concat(r,"/graphql"),fetch:ha,headers:{"keep-alive":"true"}}),o=(0,la.o)((function(e,t){var r=t.headers,n=(0,ia.A)();return{headers:sa(sa({},r),{},{authorization:null,"X-Request-Id":n})}})),i=(0,aa.S)((function(t){var r=t.networkError;(function(e){return!!e&&"statusCode"in e})(r)&&401===r.statusCode&&e.onLogout()})),a=ta.C.from([i,o,t]);return new ra.R({link:a,cache:new na.D,connectToDevTools:!0,name:"prospect-guidance-ui",version:n})}),[r,n,e]);return m.createElement(oa.X,{client:o},e.children)}var ma=function(e){var t=e.children,r=Be().postMessage,n=window.self===window.top;return(0,at.Mh)(Sn,xn)?(r("assistantEnabled=true"),t):(r("assistantEnabled=false"),n?t:null)};function pa(e){return pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pa(e)}function ya(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function va(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(r),!0).forEach((function(t){ga(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ya(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ga(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=pa(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=pa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pa(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ba=qi("UB_LAUNCHDARKLY_CLIENT_ID"),wa=(0,at.jX)(ba);function Ea(e,t){var r={};return e&&(r=va(va({},r),{},{university:{id:e}})),t&&(r=va(va({},r),{},{university:va(va({},r.university),{},{slug:t})})),new at.KJ("assistant-user",r)}var Sa,xa,Oa,ja,ka=function(e){var t=e.children,r=new URLSearchParams(window.location.search),n=r.get("universityId"),o=r.get("universitySlug");return m.createElement(wa,{user:Ea(n,o)},m.createElement(ma,null,t))},Aa=function(){var e=Y().universityId,t=qi("LOGO_URL"),r=qi("UB_SERVICE"),n="".concat(t,"/logos/").concat(r,"/").concat(e,"/").concat("unibuddy-logo.png");return e&&t&&r?m.createElement(y.azJ,{style:{display:"none",visibility:"hidden"}},m.createElement("img",{src:n,id:"__decorative-logo",alt:"Decorative Logo"})):null},Ia=null!==(Sa=qi("VERSION"))&&void 0!==Sa?Sa:"v0.0.0",Ca=null!==(xa=qi("MIXPANEL_ID"))&&void 0!==xa?xa:"32664f8059425b4f34cda3841205c458",La=null!==(Oa=qi("MIXPANEL_PROXY_HOST"))&&void 0!==Oa?Oa:"https://tukey.unibuddy.co",Pa={dsn:"https://df8dfeb42c58922dedc92c492ddb2027@o338736.ingest.sentry.io/4506020278501376",environment:(ja=qi("UB_ENVIRONMENT"),"master"===ja?"PRODUCTION":"qa"===ja?"QA":"DEV"),release:"PROSPECT_GUIDANCE_".concat(Ia),ignoreErrors:[],integrations:[v.dp(),g.J$()],replaysSessionSampleRate:.01,tracesSampleRate:.01,replaysOnErrorSampleRate:.01};b.T(Pa);var Ta=(0,E.createSentryAdaptor)({Sentry:w});const _a=function(){var e=new URLSearchParams(window.location.search),t=e.get("universityId"),r=e.get("universitySlug"),n=[];return"false"!==e.get("analyticsEnabled")&&(x.default.init(Ca,{api_host:La}),n.push(x.default)),m.createElement(ka,null,m.createElement(E.ErrorReportingProvider,{adaptor:Ta},m.createElement(da,{onLogout:function(){console.log("Bye bye")}},m.createElement(y.bWg,{theme:nt},m.createElement(K,{universityId:t,universitySlug:r},m.createElement(S.yP,{adaptors:null!=n?n:[]},m.createElement(Ue,null,m.createElement(Aa,null),m.createElement(Ri,null))))))))};e=r.hmd(e);var Na=document.getElementById("root");if(!Na)throw new Error("Dom node not found");var Da=(0,p.H)(Na);function Ma(){Da.render(m.createElement(_a,null))}"hot"in e&&e.hot.accept("./App.tsx",(function(){return Ma()})),Ma()},3743:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(1354),o=r.n(n),i=r(6314),a=r.n(i),l=r(7129),c=a()(o());c.i(l.A),c.push([e.id,':root {\n    font-family:\n        "Nunito",\n        -apple-system,\n        BlinkMacSystemFont,\n        "Segoe UI",\n        "Roboto",\n        "Oxygen",\n        "Ubuntu",\n        "Cantarell",\n        "Fira Sans",\n        "Droid Sans",\n        "Helvetica Neue",\n        sans-serif;\n}\n\nbody {\n    margin: 0;\n    padding: 0;\n}\n\n* {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n',"",{version:3,sources:["webpack://./src/App.css"],names:[],mappings:"AAEA;IACI;;;;;;;;;;;;kBAYc;AAClB;;AAEA;IACI,SAAS;IACT,UAAU;AACd;;AAEA;IACI,8BAA8B;IAC9B,2BAA2B;IAC3B,sBAAsB;AAC1B",sourcesContent:['@import "@unibuddy/patron/dist/styles.css";\n\n:root {\n    font-family:\n        "Nunito",\n        -apple-system,\n        BlinkMacSystemFont,\n        "Segoe UI",\n        "Roboto",\n        "Oxygen",\n        "Ubuntu",\n        "Cantarell",\n        "Fira Sans",\n        "Droid Sans",\n        "Helvetica Neue",\n        sans-serif;\n}\n\nbody {\n    margin: 0;\n    padding: 0;\n}\n\n* {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n}\n'],sourceRoot:""}]);const u=c}},e=>{e.O(0,[5244,2993,9849,1603,6732,1517,8471,8085,6166,3852,1437,9616,6138,3976,7874,9851,5090,7547,6900,410,7979,521,6730,7834,9409,7479,4023,9358,4864,9119,1934,7866,520,5828,5091,8077,6893,8275,5750,8672,2241,6340,5743,8194,95,6901,1907,7415,5316,7009,3975,5309,903,2338,7251,4180,9171,960,2690,3773,8670],(()=>{return t=27,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=main.9479a67e963462524016.js.map